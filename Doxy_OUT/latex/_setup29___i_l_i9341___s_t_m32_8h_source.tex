\doxysection{Setup29\+\_\+\+ILI9341\+\_\+\+STM32.\+h}
\label{_setup29___i_l_i9341___s_t_m32_8h_source}\index{lib/TFT\_eSPI-\/master/User\_Setups/Setup29\_ILI9341\_STM32.h@{lib/TFT\_eSPI-\/master/User\_Setups/Setup29\_ILI9341\_STM32.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00003\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ Setup\ for\ STM32\ Nucleo\ and\ ILI9341\ display\ \ \ //}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#define\ USER\_SETUP\_ID\ 29}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{comment}{//\ Last\ update\ by\ Bodmer:\ 28/11/19}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{comment}{//\ STM32\ optimised\ functions\ are\ not\ yet\ compatible\ with\ STM32H743\ processor.}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ The\ STM32H743\ does\ work\ with\ the\ slower\ generic\ processor\ drivers}}
\DoxyCodeLine{00011\ \textcolor{comment}{//}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ REMINDER\ -\/\ Nucleo-\/F743ZI\ and\ Nucleo-\/F743ZI2\ have\ different\ pin\ port\ allocations}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ and\ require\ appropriate\ selection\ in\ IDE.\ \string^-\/-\/-\/-\/\ Note\ the\ extra\ 2\ in\ part\ number!}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{comment}{//\ Define\ STM32\ to\ invoke\ STM32\ optimised\ driver}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#define\ STM32}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{comment}{//\ Define\ the\ TFT\ display\ driver}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#define\ ILI9341\_DRIVER}}
\DoxyCodeLine{00021\ \textcolor{comment}{//\#define\ ILI9481\_DRIVER}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{comment}{//\ MOSI\ and\ SCK\ do\ not\ need\ to\ be\ defined,\ connect:}}
\DoxyCodeLine{00024\ \textcolor{comment}{//\ \ -\/\ Arduino\ SCK\ \ to\ TFT\ SCK}}
\DoxyCodeLine{00025\ \textcolor{comment}{//\ \ -\/\ Arduino\ MOSI\ to\ TFT\ SDI(may\ be\ marked\ SDA\ or\ MOSI)}}
\DoxyCodeLine{00026\ \textcolor{comment}{//\ Typical\ Arduino\ SPI\ port\ 1\ pins\ are\ (SCK=D13,\ MISO=D12,\ MOSI=D11)\ this\ is\ port\ pins\ PA5,\ PA6\ and\ PA7\ on\ Nucleo-\/F767ZI}}
\DoxyCodeLine{00027\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SPI\ port\ 2\ pins\ are\ (SCK=D18,\ MISO=A7,\ MOSI=D17)\ this\ is\ port\ pins\ PB13,\ PC2\ and\ PB15\ on\ Nucleo-\/F767ZI}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{comment}{/*}}
\DoxyCodeLine{00030\ \textcolor{comment}{\#define\ TFT\_SPI\_PORT\ 1\ //\ SPI\ 1\ maximum\ clock\ rate\ is\ 55MHz}}
\DoxyCodeLine{00031\ \textcolor{comment}{\#define\ TFT\_MOSI\ PA7}}
\DoxyCodeLine{00032\ \textcolor{comment}{\#define\ TFT\_MISO\ PA6}}
\DoxyCodeLine{00033\ \textcolor{comment}{\#define\ TFT\_SCLK\ PA5}}
\DoxyCodeLine{00034\ \textcolor{comment}{//*/}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{comment}{/*}}
\DoxyCodeLine{00037\ \textcolor{comment}{\#define\ TFT\_SPI\_PORT\ 2\ //\ SPI\ 2\ maximum\ clock\ rate\ is\ 27MHz}}
\DoxyCodeLine{00038\ \textcolor{comment}{\#define\ TFT\_MOSI\ D17}}
\DoxyCodeLine{00039\ \textcolor{comment}{\#define\ TFT\_MISO\ A7}}
\DoxyCodeLine{00040\ \textcolor{comment}{\#define\ TFT\_SCLK\ D18}}
\DoxyCodeLine{00041\ \textcolor{comment}{//*/}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{comment}{/*}}
\DoxyCodeLine{00044\ \textcolor{comment}{\#define\ TFT\_SPI\_PORT\ 2\ //\ SPI\ 2\ maximum\ clock\ rate\ is\ 27MHz}}
\DoxyCodeLine{00045\ \textcolor{comment}{\#define\ TFT\_MOSI\ PB15}}
\DoxyCodeLine{00046\ \textcolor{comment}{\#define\ TFT\_MISO\ PC2}}
\DoxyCodeLine{00047\ \textcolor{comment}{\#define\ TFT\_SCLK\ PB13}}
\DoxyCodeLine{00048\ \textcolor{comment}{//*/}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{comment}{/*}}
\DoxyCodeLine{00051\ \textcolor{comment}{\#define\ TFT\_SPI\_PORT\ 2\ //\ SPI\ 2\ maximum\ clock\ rate\ is\ 27MHz}}
\DoxyCodeLine{00052\ \textcolor{comment}{\#define\ TFT\_MOSI\ PB15}}
\DoxyCodeLine{00053\ \textcolor{comment}{\#define\ TFT\_MISO\ PB14}}
\DoxyCodeLine{00054\ \textcolor{comment}{\#define\ TFT\_SCLK\ PB13}}
\DoxyCodeLine{00055\ \textcolor{comment}{//*/}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \textcolor{comment}{//\ Can\ use\ Ardiuno\ pin\ references,\ arbitrary\ allocation,\ TFT\_eSPI\ controls\ chip\ select}}
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\#define\ TFT\_CS\ \ \ D5\ }\textcolor{comment}{//\ Chip\ select\ control\ pin\ to\ TFT\ CS}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#define\ TFT\_DC\ \ \ D6\ }\textcolor{comment}{//\ Data\ Command\ control\ pin\ to\ TFT\ DC\ (may\ be\ labelled\ RS\ =\ Register\ Select)}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\#define\ TFT\_RST\ \ D7\ }\textcolor{comment}{//\ Reset\ pin\ to\ TFT\ RST\ (or\ RESET)}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \textcolor{comment}{//\ Alternatively,\ we\ can\ use\ STM32\ port\ reference\ names\ PXnn}}
\DoxyCodeLine{00063\ \textcolor{comment}{//\#define\ TFT\_CS\ \ \ PE11\ //\ Nucleo-\/F767ZI\ equivalent\ of\ D5}}
\DoxyCodeLine{00064\ \textcolor{comment}{//\#define\ TFT\_DC\ \ \ PE9\ \ //\ Nucleo-\/F767ZI\ equivalent\ of\ D6}}
\DoxyCodeLine{00065\ \textcolor{comment}{//\#define\ TFT\_RST\ \ PF13\ //\ Nucleo-\/F767ZI\ equivalent\ of\ D7}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{comment}{//\#define\ TFT\_RST\ \ -\/1\ \ \ //\ Set\ TFT\_RST\ to\ -\/1\ if\ the\ display\ RESET\ is\ connected\ to\ processor\ reset}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ an\ Arduino\ pin\ for\ initial\ testing\ as\ connecting\ to\ processor\ reset}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ may\ not\ work\ (pulse\ too\ short\ at\ power\ up?)}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \textcolor{comment}{//\ Chip\ select\ for\ XPT2046\ touch\ controller}}
\DoxyCodeLine{00072\ \textcolor{preprocessor}{\#define\ TOUCH\_CS\ D4}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#define\ LOAD\_GLCD\ \ \ }\textcolor{comment}{//\ Font\ 1.\ Original\ Adafruit\ 8\ pixel\ font\ needs\ \string~1820\ bytes\ in\ FLASH}}
\DoxyCodeLine{00075\ \textcolor{preprocessor}{\#define\ LOAD\_FONT2\ \ }\textcolor{comment}{//\ Font\ 2.\ Small\ 16\ pixel\ high\ font,\ needs\ \string~3534\ bytes\ in\ FLASH,\ 96\ characters}}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#define\ LOAD\_FONT4\ \ }\textcolor{comment}{//\ Font\ 4.\ Medium\ 26\ pixel\ high\ font,\ needs\ \string~5848\ bytes\ in\ FLASH,\ 96\ characters}}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#define\ LOAD\_FONT6\ \ }\textcolor{comment}{//\ Font\ 6.\ Large\ 48\ pixel\ font,\ needs\ \string~2666\ bytes\ in\ FLASH,\ only\ characters\ 1234567890:-\/.apm}}
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\#define\ LOAD\_FONT7\ \ }\textcolor{comment}{//\ Font\ 7.\ 7\ segment\ 48\ pixel\ font,\ needs\ \string~2438\ bytes\ in\ FLASH,\ only\ characters\ 1234567890:-\/.}}
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\#define\ LOAD\_FONT8\ \ }\textcolor{comment}{//\ Font\ 8.\ Large\ 75\ pixel\ font\ needs\ \string~3256\ bytes\ in\ FLASH,\ only\ characters\ 1234567890:-\/.}}
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#define\ LOAD\_GFXFF\ \ }\textcolor{comment}{//\ FreeFonts.\ Include\ access\ to\ the\ 48\ Adafruit\_GFX\ free\ fonts\ FF1\ to\ FF48\ and\ custom\ fonts}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \textcolor{comment}{//\ STM32\ support\ for\ smooth\ fonts\ via\ program\ memory\ (FLASH)\ arrays}}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\#define\ SMOOTH\_FONT}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \textcolor{comment}{//\ Nucleo-\/F767ZI\ has\ a\ \string~216MHZ\ CPU\ clock,\ this\ is\ divided\ by\ 4,\ 8,\ 16\ etc.}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\#define\ SPI\_FREQUENCY\ \ 27000000\ \ \ }\textcolor{comment}{//\ 27MHz\ SPI\ clock}}
\DoxyCodeLine{00089\ \textcolor{comment}{//\#define\ SPI\_FREQUENCY\ \ 55000000\ \ \ //\ 55MHz\ is\ over-\/clocking\ ILI9341\ but\ seems\ to\ work\ reliably!}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\#define\ SPI\_READ\_FREQUENCY\ \ 15000000\ }\textcolor{comment}{//\ Reads\ need\ a\ slower\ SPI\ clock,\ probably\ ends\ up\ at\ 13.75MHz\ (CPU\ clock/16)}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \textcolor{preprocessor}{\#define\ SPI\_TOUCH\_FREQUENCY\ \ 2500000\ }\textcolor{comment}{//\ Must\ be\ very\ slow}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \textcolor{comment}{//\ This\ has\ no\ effect,\ transactions\ for\ STM32\ are\ automatically\ enabled}}
\DoxyCodeLine{00096\ \textcolor{preprocessor}{\#define\ SUPPORT\_TRANSACTIONS}}

\end{DoxyCode}
