\doxysection{TFT\+\_\+e\+SPI\+\_\+\+STM32.\+h}
\label{_t_f_t__e_s_p_i___s_t_m32_8h_source}\index{lib/TFT\_eSPI-\/master/Processors/TFT\_eSPI\_STM32.h@{lib/TFT\_eSPI-\/master/Processors/TFT\_eSPI\_STM32.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00002\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TFT\_eSPI\ driver\ functions\ for\ STM32\ processors\ //}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#ifndef\ \_TFT\_eSPI\_STM32H\_}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#define\ \_TFT\_eSPI\_STM32H\_}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{comment}{//\ Processor\ ID\ reported\ by\ getSetup()}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#define\ PROCESSOR\_ID\ 0x32F}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Include\ processor\ specific\ header}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ None}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{comment}{//\ RPi\ support\ not\ tested\ -\/\ Fast\ RPi\ not\ supported}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{comment}{//\ Processor\ specific\ code\ used\ by\ SPI\ bus\ transaction\ startWrite\ and\ endWrite\ functions}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#define\ SET\_BUS\_WRITE\_MODE\ }\textcolor{comment}{//\ Not\ used}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ SET\_BUS\_READ\_MODE\ \ }\textcolor{comment}{//\ Not\ used}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{comment}{//\ SUPPORT\_TRANSACTIONS\ is\ mandatory\ for\ STM32}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#if\ !defined\ (SUPPORT\_TRANSACTIONS)}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\ \ \#define\ SUPPORT\_TRANSACTIONS}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00026\ \textcolor{comment}{//\ Define\ the\ parallel\ bus\ interface\ chip\ pin\ drive\ code}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#if\ defined(TFT\_PARALLEL\_8\_BIT)}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \textcolor{comment}{//\ The\ STM32\ processors\ can\ toggle\ pins\ fast,\ TFTs\ need\ setup\ and\ hold\ times}}
\DoxyCodeLine{00031\ \ \ \textcolor{comment}{//\ for\ writes\ so\ here\ twc\ can\ be\ extended\ \ with\ delays:}}
\DoxyCodeLine{00032\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00033\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0\ 1\ 2\ 3\ 4\ 5\ \ \ \ \ Extra\ high\ periods}}
\DoxyCodeLine{00034\ \ \ \textcolor{comment}{//\ TFT\_WR\ ¯|\_\ \_\ \_\ \_\ \_\ \_\ |¯\ ¯\ ¯\ ¯\ ¯\ ¯\ ¯|}}
\DoxyCodeLine{00035\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ 5\ 4\ 3\ 2\ 1\ 0\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Extra\ low\ periods}}
\DoxyCodeLine{00036\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ xxxx=======================xxxx}}
\DoxyCodeLine{00037\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ |<-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ twc\ -\/-\/-\/-\/-\/-\/-\/-\/-\/>|}}
\DoxyCodeLine{00038\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ |<-\/\ tdst\ -\/>|<-\/-\/\ tdht\ -\/-\/>|}}
\DoxyCodeLine{00039\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00040\ \ \ \textcolor{comment}{//\ Data\ is\ placed\ bit\ by\ bit\ on\ bus\ during\ period\ xxxx\ and\ TFT\_WR\ driven\ low}}
\DoxyCodeLine{00041\ \ \ \textcolor{comment}{//\ Period\ xxxx\ depends\ on\ D0-\/D7\ pin\ allocations\ and\ bit\ manipulation\ needed}}
\DoxyCodeLine{00042\ \ \ \textcolor{comment}{//\ Data\ stable\ during\ period\ ===}}
\DoxyCodeLine{00043\ \ \ \textcolor{comment}{//\ Most\ TFTs\ can\ be\ "{}overclocked"{}\ and\ run\ >2x\ faster\ than\ data\ sheet\ figures}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00046\ \textcolor{comment}{//\ Write\ strobe\ timing\ setup}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\ \ \#if\ defined\ (ILI9341\_DRIVER)\ ||\ defined(ILI9341\_2\_DRIVER)\ ||\ defined\ (ST7796\_DRIVER)\ \ \ ||\ defined\ (ILI9486\_DRIVER)\ }\textcolor{comment}{//\ WRX\ twc\ spec\ is\ <=66ns\ =\ 15.15MHz}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{comment}{//\ Extra\ write\ pulse\ low\ time\ (delay\ for\ data\ setup)}}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined\ (STM32F1xx)}}
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRL\_0\ \ \ \ \ \ \ }\textcolor{comment}{//\ Change\ to\ WR\_TWRL\_1\ if\ overclocking\ processor}}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined\ (STM32F2xx)\ ||\ defined\ (STM32F4xx)}}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRL\_0\ \ \ \ \ \ \ }\textcolor{comment}{//\ Tested\ with\ STM32F446\ -\/\ 27.6MHz\ when\ WR\_TWRH\_1\ defined}}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_3\ \ \ \ \ //\ STM32F446\ -\/\ 15.6MHz\ when\ WR\_TWRH\_3\ defined}}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined\ (STM32F7xx)}}
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRL\_1\ \ \ \ \ \ \ }\textcolor{comment}{//Tested\ with\ STM32F767}}
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRL\_5}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{comment}{//\ Extra\ write\ pulse\ high\ time\ (data\ hold\ time,\ delays\ next\ write\ cycle\ start)}}
\DoxyCodeLine{00063\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined\ (STM32F1xx)}}
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRH\_0}}
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined\ (STM32F2xx)\ ||\ defined\ (STM32F4xx)}}
\DoxyCodeLine{00066\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRH\_0\ \ \ \ \ \ \ }\textcolor{comment}{//\ Tested\ with\ STM32F446}}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_3}}
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined\ (STM32F7xx)}}
\DoxyCodeLine{00069\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRH\_1\ \ \ \ \ \ \ }\textcolor{comment}{//Tested\ with\ STM32F767}}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00071\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRH\_5}}
\DoxyCodeLine{00072\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\ \ \#elif\ defined\ (ILI9481\_DRIVER)\ }\textcolor{comment}{//\ WRX\ twc\ spec\ is\ 100ns\ =\ 10MHz}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{comment}{//\ Extra\ write\ pulse\ low\ time\ (delay\ for\ data\ setup)}}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined\ (STM32F1xx)}}
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRL\_0}}
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined\ (STM32F2xx)\ ||\ defined\ (STM32F4xx)}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_0\ \ \ \ //\ STM32F446\ -\/\ \string~30MHz\ when\ WR\_TWRH\_0\ defined}}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_1\ \ \ \ //\ STM32F446\ -\/\ \string~25MHz\ when\ WR\_TWRH\_0\ defined}}
\DoxyCodeLine{00082\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRL\_2\ \ \ \ \ \ }\textcolor{comment}{//\ STM32F446\ -\/\ \string~20MHz\ when\ WR\_TWRH\_2\ defined}}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_3\ \ \ \ //\ STM32F446\ -\/\ \string~16MHz\ when\ WR\_TWRH\_3\ defined}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_4}}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_5\ \ \ \ //\ STM32F446\ -\/\ \string~12MHz\ when\ WR\_TWRH\_5\ defined}}
\DoxyCodeLine{00086\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined\ (STM32F7xx)}}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_0}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_1}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_2}}
\DoxyCodeLine{00090\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRL\_3}}
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_0\ \ \ \ //\ Fastest}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_1}}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_2}}
\DoxyCodeLine{00095\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRH\_3\ \ \ \ \ \ }\textcolor{comment}{//\ Slowest}}
\DoxyCodeLine{00096\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{comment}{//\ Extra\ write\ pulse\ high\ time\ (data\ hold\ time,\ delays\ next\ write\ cycle\ start)}}
\DoxyCodeLine{00099\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined\ (STM32F1xx)}}
\DoxyCodeLine{00100\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRH\_0}}
\DoxyCodeLine{00101\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined\ (STM32F2xx)\ ||\ defined\ (STM32F4xx)}}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_0}}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_1}}
\DoxyCodeLine{00104\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRH\_2}}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_3}}
\DoxyCodeLine{00106\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined\ (STM32F7xx)}}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_0}}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_1}}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_2}}
\DoxyCodeLine{00110\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRH\_3}}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_4}}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_5}}
\DoxyCodeLine{00113\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_0\ \ \ \ \ //\ Fastest}}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_1}}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_2}}
\DoxyCodeLine{00117\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRH\_3\ \ \ \ \ \ \ }\textcolor{comment}{//\ Slowest}}
\DoxyCodeLine{00118\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \textcolor{preprocessor}{\ \ \#else\ }\textcolor{comment}{//\ Default\ display\ slow\ settings}}
\DoxyCodeLine{00121\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined\ (STM32F1xx)}}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \textcolor{comment}{//\ STM32F1xx\ series\ can\ run\ at\ full\ speed\ (unless\ overclocked)}}
\DoxyCodeLine{00123\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRL\_0}}
\DoxyCodeLine{00124\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRH\_0}}
\DoxyCodeLine{00125\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \textcolor{comment}{//\ Extra\ write\ pulse\ low\ time\ (delay\ for\ data\ setup)}}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_0}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_1}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_2}}
\DoxyCodeLine{00130\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRL\_3}}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_4}}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRL\_5}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ \ \ \textcolor{comment}{//\ Extra\ write\ pulse\ high\ time\ (data\ hold\ time,\ delays\ next\ write\ cycle\ start)}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_0}}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_1}}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_2}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_3}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \textcolor{comment}{//\#define\ WR\_TWRH\_4}}
\DoxyCodeLine{00140\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ WR\_TWRH\_5}}
\DoxyCodeLine{00141\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00142\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00145\ \textcolor{comment}{//\ Macros\ for\ all\ other\ SPI\ displays}}
\DoxyCodeLine{00147\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \textcolor{comment}{//\ Use\ SPI1\ as\ default\ if\ not\ defined}}
\DoxyCodeLine{00150\ \textcolor{preprocessor}{\ \ \#ifndef\ TFT\_SPI\_PORT}}
\DoxyCodeLine{00151\ \textcolor{preprocessor}{\ \ \ \ \#define\ TFT\_SPI\_PORT\ 1}}
\DoxyCodeLine{00152\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \textcolor{preprocessor}{\ \ \#if\ (TFT\_SPI\_PORT\ ==\ 1)}}
\DoxyCodeLine{00155\ \textcolor{preprocessor}{\ \ \ \ \#define\ SPIX\ SPI1}}
\DoxyCodeLine{00156\ \textcolor{preprocessor}{\ \ \#elif\ (TFT\_SPI\_PORT\ ==\ 2)}}
\DoxyCodeLine{00157\ \textcolor{preprocessor}{\ \ \ \ \#define\ SPIX\ SPI2}}
\DoxyCodeLine{00158\ \textcolor{preprocessor}{\ \ \#elif\ (TFT\_SPI\_PORT\ ==\ 3)}}
\DoxyCodeLine{00159\ \textcolor{preprocessor}{\ \ \ \ \#define\ SPIX\ SPI3}}
\DoxyCodeLine{00160\ \textcolor{preprocessor}{\ \ \#elif\ (TFT\_SPI\_PORT\ ==\ 4)}}
\DoxyCodeLine{00161\ \textcolor{preprocessor}{\ \ \ \ \#define\ SPIX\ SPI4}}
\DoxyCodeLine{00162\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00163\ \ \ \textcolor{comment}{//\ Global\ define\ is\ \_VARIANT\_ARDUINO\_STM32\_,\ see\ board\ package\ stm32\_def.h\ for\ specific\ variants}}
\DoxyCodeLine{00164\ \textcolor{preprocessor}{\ \ \#if\ defined\ (STM32F2xx)\ ||\ defined\ (STM32F4xx)\ ||\ defined\ (STM32F7xx)}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \textcolor{preprocessor}{\ \ \ \ \#define\ STM32\_DMA\ }\textcolor{comment}{//\ DMA\ is\ available\ with\ these\ processors}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \textcolor{preprocessor}{\ \ \ \ \#if\ (TFT\_SPI\_PORT\ ==\ 1)}}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \textcolor{comment}{//\ Initialise\ processor\ specific\ SPI\ and\ DMA\ instances\ -\/\ used\ by\ init()}}
\DoxyCodeLine{00170\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ INIT\_TFT\_DATA\_BUS\ spiHal.Instance\ =\ SPI1;\ \(\backslash\)}}
\DoxyCodeLine{00171\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dmaHal.Instance\ =\ DMA2\_Stream3}}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ DMA\ hard-\/coding\ for\ SPI1\ is\ in\ TFT\_eSPI\_STM32.c\ as\ follows:}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ DMA\_CHANNEL\_3}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ DMA2\_Stream3\_IRQn\ and\ DMA2\_Stream3\_IRQHandler()}}
\DoxyCodeLine{00175\ \textcolor{preprocessor}{\ \ \ \ \#elif\ (TFT\_SPI\_PORT\ ==\ 2)}}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \textcolor{comment}{//\ Initialise\ processor\ specific\ SPI\ and\ DMA\ instances\ -\/\ used\ by\ init()}}
\DoxyCodeLine{00177\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ INIT\_TFT\_DATA\_BUS\ spiHal.Instance\ =\ SPI2;\ \(\backslash\)}}
\DoxyCodeLine{00178\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dmaHal.Instance\ =\ DMA1\_Stream4}}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ DMA\ hard-\/coding\ for\ SPI2\ is\ in\ TFT\_eSPI\_STM32.c\ as\ follows:}}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ DMA\_CHANNEL\_4}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ DMA1\_Stream4\_IRQn\ and\ DMA1\_Stream4\_IRQHandler()}}
\DoxyCodeLine{00182\ \textcolor{preprocessor}{\ \ \ \ \#elif\ (TFT\_SPI\_PORT\ ==\ 3)}}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \textcolor{comment}{//\ Initialise\ processor\ specific\ SPI\ and\ DMA\ instances\ -\/\ used\ by\ init()}}
\DoxyCodeLine{00184\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ INIT\_TFT\_DATA\_BUS\ spiHal.Instance\ =\ SPI3;\ \(\backslash\)}}
\DoxyCodeLine{00185\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dmaHal.Instance\ =\ DMA1\_Stream5}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ DMA\ hard-\/coding\ for\ SPI3\ is\ in\ TFT\_eSPI\_STM32.c\ as\ follows:}}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ DMA\_CHANNEL\_4}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ DMA1\_Stream5\_IRQn\ and\ DMA1\_Stream5\_IRQHandler()}}
\DoxyCodeLine{00189\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \textcolor{preprocessor}{\ \ \#elif\ defined\ (STM32F1xx)}}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{comment}{//\ For\ Blue\ Pill\ and\ STM32F1xx\ processors\ with\ DMA\ support}}
\DoxyCodeLine{00193\ \textcolor{preprocessor}{\ \ \ \ \#define\ STM32\_DMA\ }\textcolor{comment}{//\ DMA\ is\ available\ with\ these\ processors}}
\DoxyCodeLine{00194\ \textcolor{preprocessor}{\ \ \ \ \#if\ (TFT\_SPI\_PORT\ ==\ 1)}}
\DoxyCodeLine{00195\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ INIT\_TFT\_DATA\_BUS\ spiHal.Instance\ =\ SPI1;\ \(\backslash\)}}
\DoxyCodeLine{00196\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dmaHal.Instance\ =\ DMA1\_Channel3}}
\DoxyCodeLine{00197\ \textcolor{preprocessor}{\ \ \ \ \#elif\ (TFT\_SPI\_PORT\ ==\ 2)}}
\DoxyCodeLine{00198\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ INIT\_TFT\_DATA\_BUS\ spiHal.Instance\ =\ SPI2;\ \(\backslash\)}}
\DoxyCodeLine{00199\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dmaHal.Instance\ =\ DMA1\_Channel5}}
\DoxyCodeLine{00200\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00201\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{comment}{//\ For\ STM32\ processor\ with\ no\ implemented\ DMA\ support\ (yet)}}
\DoxyCodeLine{00203\ \textcolor{preprocessor}{\ \ \ \ \#if\ (TFT\_SPI\_PORT\ ==\ 1)}}
\DoxyCodeLine{00204\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ INIT\_TFT\_DATA\_BUS\ spiHal.Instance\ =\ SPI1}}
\DoxyCodeLine{00205\ \textcolor{preprocessor}{\ \ \ \ \#elif\ (TFT\_SPI\_PORT\ ==\ 2)}}
\DoxyCodeLine{00206\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ INIT\_TFT\_DATA\_BUS\ spiHal.Instance\ =\ SPI2}}
\DoxyCodeLine{00207\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00208\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \textcolor{preprocessor}{\#ifdef\ STM32\_DMA}}
\DoxyCodeLine{00213\ \ \ \textcolor{comment}{//\ Code\ to\ check\ if\ DMA\ is\ busy,\ used\ by\ SPI\ DMA\ +\ transaction\ +\ endWrite\ functions}}
\DoxyCodeLine{00214\ \textcolor{preprocessor}{\ \ \#define\ DMA\_BUSY\_CHECK\ \{\ if\ (DMA\_Enabled)\ while(dmaBusy());\ \}}}
\DoxyCodeLine{00215\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00216\ \textcolor{preprocessor}{\ \ \#define\ DMA\_BUSY\_CHECK}}
\DoxyCodeLine{00217\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \textcolor{comment}{//\ If\ smooth\ fonts\ are\ enabled\ the\ filing\ system\ may\ need\ to\ be\ loaded}}
\DoxyCodeLine{00220\ \textcolor{preprocessor}{\#ifdef\ SMOOTH\_FONT}}
\DoxyCodeLine{00221\ \ \ \textcolor{comment}{//\ Call\ up\ the\ filing\ system\ for\ the\ anti-\/aliased\ fonts\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<<====\ TODO}}
\DoxyCodeLine{00222\ \ \ \textcolor{comment}{//\#define\ FS\_NO\_GLOBALS}}
\DoxyCodeLine{00223\ \ \ \textcolor{comment}{//\#include\ <FS.h>}}
\DoxyCodeLine{00224\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ end\ of\ parallel/SPI\ selection}}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00227\ \textcolor{comment}{//\ Define\ the\ DC\ (TFT\ Data/Command\ or\ Register\ Select\ (RS))pin\ drive\ code}}
\DoxyCodeLine{00229\ \textcolor{preprocessor}{\#if\ !defined\ (TFT\_DC)\ ||\ (TFT\_DC\ <\ 0)}}
\DoxyCodeLine{00230\ \textcolor{preprocessor}{\ \ \#define\ DC\_C\ }\textcolor{comment}{//\ No\ macro\ allocated\ so\ it\ generates\ no\ code}}
\DoxyCodeLine{00231\ \textcolor{preprocessor}{\ \ \#define\ DC\_D\ }\textcolor{comment}{//\ No\ macro\ allocated\ so\ it\ generates\ no\ code}}
\DoxyCodeLine{00232\ \textcolor{preprocessor}{\ \ \#undef\ \ TFT\_DC}}
\DoxyCodeLine{00233\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00234\ \ \ \textcolor{comment}{//\ Convert\ Arduino\ pin\ reference\ Dn\ or\ STM\ pin\ reference\ PXn\ to\ port\ and\ mask}}
\DoxyCodeLine{00235\ \textcolor{preprocessor}{\ \ \#define\ DC\_PORT\ \ \ \ \ digitalPinToPort(TFT\_DC)}}
\DoxyCodeLine{00236\ \textcolor{preprocessor}{\ \ \#define\ DC\_PIN\_MASK\ digitalPinToBitMask(TFT\_DC)}}
\DoxyCodeLine{00237\ \ \ \textcolor{comment}{//\ Use\ bit\ set\ reset\ register}}
\DoxyCodeLine{00238\ \textcolor{preprocessor}{\ \ \#define\ DC\_C\ DC\_DELAY;\ DC\_PORT-\/>BSRR\ =\ DC\_PIN\_MASK<<16}}
\DoxyCodeLine{00239\ \textcolor{preprocessor}{\ \ \#define\ DC\_D\ DC\_DELAY;\ DC\_PORT-\/>BSRR\ =\ DC\_PIN\_MASK}}
\DoxyCodeLine{00240\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00243\ \textcolor{comment}{//\ Define\ the\ CS\ (TFT\ chip\ select)\ pin\ drive\ code}}
\DoxyCodeLine{00245\ \textcolor{preprocessor}{\#if\ !defined\ (TFT\_CS)\ ||\ (TFT\_CS\ <\ 0)}}
\DoxyCodeLine{00246\ \textcolor{preprocessor}{\ \ \#define\ CS\_L\ }\textcolor{comment}{//\ No\ macro\ allocated\ so\ it\ generates\ no\ code}}
\DoxyCodeLine{00247\ \textcolor{preprocessor}{\ \ \#define\ CS\_H\ }\textcolor{comment}{//\ No\ macro\ allocated\ so\ it\ generates\ no\ code}}
\DoxyCodeLine{00248\ \textcolor{preprocessor}{\ \ \#undef\ \ TFT\_CS}}
\DoxyCodeLine{00249\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00250\ \ \ \textcolor{comment}{//\ Convert\ Arduino\ pin\ reference\ Dx\ or\ STM\ pin\ reference\ PXn\ to\ port\ and\ mask}}
\DoxyCodeLine{00251\ \textcolor{preprocessor}{\ \ \#define\ CS\_PORT\ \ \ \ \ \ digitalPinToPort(TFT\_CS)}}
\DoxyCodeLine{00252\ \textcolor{preprocessor}{\ \ \#define\ CS\_PIN\_MASK\ \ digitalPinToBitMask(TFT\_CS)}}
\DoxyCodeLine{00253\ \ \ \textcolor{comment}{//\ Use\ bit\ set\ reset\ register}}
\DoxyCodeLine{00254\ \textcolor{preprocessor}{\ \ \#define\ CS\_L\ CS\_PORT-\/>BSRR\ =\ CS\_PIN\_MASK<<16}}
\DoxyCodeLine{00255\ \textcolor{preprocessor}{\ \ \#define\ CS\_H\ CS\_PORT-\/>BSRR\ =\ CS\_PIN\_MASK}}
\DoxyCodeLine{00256\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00259\ \textcolor{comment}{//\ Define\ the\ RD\ (TFT\ Read)\ pin\ drive\ code}}
\DoxyCodeLine{00261\ \textcolor{preprocessor}{\#ifdef\ TFT\_RD}}
\DoxyCodeLine{00262\ \textcolor{preprocessor}{\ \ \#if\ (TFT\_RD\ >=\ 0)}}
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{comment}{//\ Convert\ Arduino\ pin\ reference\ Dx\ or\ STM\ pin\ reference\ PXn\ to\ port\ and\ mask}}
\DoxyCodeLine{00264\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_PORT\ \ \ \ \ \ digitalPinToPort(TFT\_RD)}}
\DoxyCodeLine{00265\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_PIN\_MASK\ \ digitalPinToBitMask(TFT\_RD)}}
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{comment}{//\ Use\ bit\ set\ reset\ register}}
\DoxyCodeLine{00267\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_L\ RD\_PORT-\/>BSRR\ =\ RD\_PIN\_MASK<<16}}
\DoxyCodeLine{00268\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_H\ RD\_PORT-\/>BSRR\ =\ RD\_PIN\_MASK}}
\DoxyCodeLine{00269\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{00270\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_L}}
\DoxyCodeLine{00271\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_H}}
\DoxyCodeLine{00272\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00273\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00274\ \textcolor{preprocessor}{\ \ \#define\ TFT\_RD\ -\/1}}
\DoxyCodeLine{00275\ \textcolor{preprocessor}{\ \ \#define\ RD\_L}}
\DoxyCodeLine{00276\ \textcolor{preprocessor}{\ \ \#define\ RD\_H}}
\DoxyCodeLine{00277\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00280\ \textcolor{comment}{//\ Define\ the\ WR\ (TFT\ Write)\ pin\ drive\ code}}
\DoxyCodeLine{00282\ \textcolor{preprocessor}{\#ifdef\ TFT\_WR}}
\DoxyCodeLine{00283\ \ \ \textcolor{comment}{//\ Convert\ Arduino\ pin\ reference\ Dx\ or\ STM\ pin\ reference\ PXn\ to\ port\ and\ mask}}
\DoxyCodeLine{00284\ \textcolor{preprocessor}{\ \ \#define\ WR\_PORT\ \ \ \ \ \ digitalPinToPort(TFT\_WR)}}
\DoxyCodeLine{00285\ \textcolor{preprocessor}{\ \ \#define\ WR\_PIN\_MASK\ \ digitalPinToBitMask(TFT\_WR)}}
\DoxyCodeLine{00286\ \ \ \textcolor{comment}{//\ Use\ bit\ set\ reset\ register}}
\DoxyCodeLine{00287\ \textcolor{preprocessor}{\ \ \#define\ WR\_L\ WR\_PORT-\/>BSRR\ =\ WR\_PIN\_MASK<<16}}
\DoxyCodeLine{00288\ \textcolor{preprocessor}{\ \ \#define\ WR\_H\ WR\_PORT-\/>BSRR\ =\ WR\_PIN\_MASK}}
\DoxyCodeLine{00289\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00292\ \textcolor{comment}{//\ Define\ the\ touch\ screen\ chip\ select\ pin\ drive\ code}}
\DoxyCodeLine{00294\ \textcolor{preprocessor}{\#if\ !defined\ (TOUCH\_CS)\ ||\ (TOUCH\_CS\ <\ 0)}}
\DoxyCodeLine{00295\ \textcolor{preprocessor}{\ \ \#define\ T\_CS\_L\ }\textcolor{comment}{//\ No\ macro\ allocated\ so\ it\ generates\ no\ code}}
\DoxyCodeLine{00296\ \textcolor{preprocessor}{\ \ \#define\ T\_CS\_H\ }\textcolor{comment}{//\ No\ macro\ allocated\ so\ it\ generates\ no\ code}}
\DoxyCodeLine{00297\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00298\ \ \ \textcolor{comment}{//\ Speed\ is\ not\ important\ for\ this\ signal}}
\DoxyCodeLine{00299\ \textcolor{preprocessor}{\ \ \#define\ T\_CS\_L\ digitalWrite(TOUCH\_CS,\ LOW)}}
\DoxyCodeLine{00300\ \textcolor{preprocessor}{\ \ \#define\ T\_CS\_H\ digitalWrite(TOUCH\_CS,\ HIGH)}}
\DoxyCodeLine{00301\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00304\ \textcolor{comment}{//\ Make\ sure\ TFT\_MISO\ is\ defined\ if\ not\ used\ to\ avoid\ an\ error\ message}}
\DoxyCodeLine{00306\ \textcolor{preprocessor}{\#if\ !defined\ (TFT\_PARALLEL\_8\_BIT)}}
\DoxyCodeLine{00307\ \textcolor{preprocessor}{\ \ \#ifndef\ TFT\_MISO}}
\DoxyCodeLine{00308\ \textcolor{preprocessor}{\ \ \ \ \#define\ TFT\_MISO\ -\/1}}
\DoxyCodeLine{00309\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00310\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00313\ \textcolor{comment}{//\ Define\ the\ parallel\ bus\ interface\ chip\ pin\ drive\ code}}
\DoxyCodeLine{00315\ \textcolor{preprocessor}{\#if\ defined\ (TFT\_PARALLEL\_8\_BIT)}}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \ \ \textcolor{comment}{//\ Mask\ for\ the\ 8\ data\ bits\ to\ set\ pin\ directions\ (not\ used)}}
\DoxyCodeLine{00318\ \textcolor{preprocessor}{\ \ \#define\ GPIO\_DIR\_MASK\ 0}}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \textcolor{preprocessor}{\ \ \#define\ PARALLEL\_INIT\_TFT\_DATA\_BUS\ }\textcolor{comment}{//\ None}}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \textcolor{preprocessor}{\ \ \#define\ INIT\_TFT\_DATA\_BUS\ }\textcolor{comment}{//\ Setup\ built\ into\ TFT\_eSPI.cpp}}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00325\ \textcolor{comment}{//\ Define\ the\ TFT\_WR\ drive\ cycle\ timing}}
\DoxyCodeLine{00327\ \ \ \textcolor{comment}{//\ Write\ low\ extra\ setup\ time}}
\DoxyCodeLine{00328\ \textcolor{preprocessor}{\ \ \#if\ \ \ defined\ WR\_TWRL\_0}}
\DoxyCodeLine{00329\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ \ \ \ WR\_TWRL}}
\DoxyCodeLine{00330\ \textcolor{preprocessor}{\ \ \#elif\ defined\ WR\_TWRL\_1\ }\textcolor{comment}{//\ 1\ extra\ low\ period}}
\DoxyCodeLine{00331\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ \ \ \ WR\_TWRL\ WR\_L}}
\DoxyCodeLine{00332\ \textcolor{preprocessor}{\ \ \#elif\ defined\ WR\_TWRL\_2\ }\textcolor{comment}{//\ 2\ extra\ low\ periods}}
\DoxyCodeLine{00333\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ \ \ \ WR\_TWRL\ WR\_L;\ WR\_L}}
\DoxyCodeLine{00334\ \textcolor{preprocessor}{\ \ \#elif\ defined\ WR\_TWRL\_3\ }\textcolor{comment}{//\ 3\ extra\ low\ periods}}
\DoxyCodeLine{00335\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ \ \ \ WR\_TWRL\ WR\_L;\ WR\_L;\ WR\_L}}
\DoxyCodeLine{00336\ \textcolor{preprocessor}{\ \ \#elif\ defined\ WR\_TWRL\_4\ }\textcolor{comment}{//\ 4\ extra\ low\ periods}}
\DoxyCodeLine{00337\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ \ \ \ WR\_TWRL\ WR\_L;\ WR\_L;\ WR\_L;\ WR\_L}}
\DoxyCodeLine{00338\ \textcolor{preprocessor}{\ \ \#elif\ defined\ WR\_TWRL\_5\ }\textcolor{comment}{//\ 5\ extra\ low\ periods}}
\DoxyCodeLine{00339\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ \ \ \ WR\_TWRL\ WR\_L;\ WR\_L;\ WR\_L;\ WR\_L;\ WR\_L}}
\DoxyCodeLine{00340\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00342\ \ \ \textcolor{comment}{//\ Write\ high\ extra\ hold\ time}}
\DoxyCodeLine{00343\ \textcolor{preprocessor}{\ \ \#if\ \ \ defined\ WR\_TWRH\_0}}
\DoxyCodeLine{00344\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ \ \ \ WR\_TWRH\ WR\_H}}
\DoxyCodeLine{00345\ \textcolor{preprocessor}{\ \ \#elif\ defined\ WR\_TWRH\_1\ }\textcolor{comment}{//\ 1\ extra\ high\ period}}
\DoxyCodeLine{00346\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ \ \ \ WR\_TWRH\ \ WR\_H;\ WR\_H}}
\DoxyCodeLine{00347\ \textcolor{preprocessor}{\ \ \#elif\ defined\ WR\_TWRH\_2\ }\textcolor{comment}{//\ 2\ extra\ high\ periods}}
\DoxyCodeLine{00348\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ \ \ \ WR\_TWRH\ \ WR\_H;\ WR\_H;\ WR\_H}}
\DoxyCodeLine{00349\ \textcolor{preprocessor}{\ \ \#elif\ defined\ WR\_TWRH\_3\ }\textcolor{comment}{//\ 3\ extra\ high\ periods}}
\DoxyCodeLine{00350\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ \ \ \ WR\_TWRH\ \ WR\_H;\ WR\_H;\ WR\_H;\ WR\_H}}
\DoxyCodeLine{00351\ \textcolor{preprocessor}{\ \ \#elif\ defined\ WR\_TWRH\_4\ }\textcolor{comment}{//\ 4\ extra\ high\ periods}}
\DoxyCodeLine{00352\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ \ \ \ WR\_TWRH\ \ WR\_H;\ WR\_H;\ WR\_H;\ WR\_H;\ WR\_H}}
\DoxyCodeLine{00353\ \textcolor{preprocessor}{\ \ \#elif\ defined\ WR\_TWRH\_5\ }\textcolor{comment}{//\ 5\ extra\ high\ periods}}
\DoxyCodeLine{00354\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ \ \ \ WR\_TWRH\ \ WR\_H;\ WR\_H;\ WR\_H;\ WR\_H;\ WR\_H;\ WR\_H}}
\DoxyCodeLine{00355\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \textcolor{preprocessor}{\ \ \#define\ WR\_STB\ WR\_TWRL;\ WR\_TWRH\ }\textcolor{comment}{//\ Rising\ edge\ write\ strobe}}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00360\ \textcolor{comment}{//\ Nucleo\ 64:\ hard-\/coded\ pins}}
\DoxyCodeLine{00362\ \textcolor{preprocessor}{\ \ \#ifdef\ NUCLEO\_64\_TFT}}
\DoxyCodeLine{00363\ }
\DoxyCodeLine{00364\ \ \ \ \ \textcolor{comment}{//\ Convert\ Arduino\ pin\ reference\ Dx\ or\ STM\ pin\ reference\ PXn\ to\ port\ and\ mask}}
\DoxyCodeLine{00365\ \textcolor{preprocessor}{\ \ \ \ \#define\ D0\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D0)}}
\DoxyCodeLine{00366\ \textcolor{preprocessor}{\ \ \ \ \#define\ D1\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D1)}}
\DoxyCodeLine{00367\ \textcolor{preprocessor}{\ \ \ \ \#define\ D2\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D2)}}
\DoxyCodeLine{00368\ \textcolor{preprocessor}{\ \ \ \ \#define\ D3\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D3)}}
\DoxyCodeLine{00369\ \textcolor{preprocessor}{\ \ \ \ \#define\ D4\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D4)}}
\DoxyCodeLine{00370\ \textcolor{preprocessor}{\ \ \ \ \#define\ D5\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D5)}}
\DoxyCodeLine{00371\ \textcolor{preprocessor}{\ \ \ \ \#define\ D6\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D6)}}
\DoxyCodeLine{00372\ \textcolor{preprocessor}{\ \ \ \ \#define\ D7\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D7)}}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ \ \ \textcolor{comment}{//\ Pin\ port\ bit\ number\ 0-\/15\ (not\ used\ for\ Nucleo)}}
\DoxyCodeLine{00375\ \textcolor{preprocessor}{\ \ \ \ \#define\ D0\_PIN\_BIT\ \ (D0\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00376\ \textcolor{preprocessor}{\ \ \ \ \#define\ D1\_PIN\_BIT\ \ (D1\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00377\ \textcolor{preprocessor}{\ \ \ \ \#define\ D2\_PIN\_BIT\ \ (D2\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00378\ \textcolor{preprocessor}{\ \ \ \ \#define\ D3\_PIN\_BIT\ \ (D3\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00379\ \textcolor{preprocessor}{\ \ \ \ \#define\ D4\_PIN\_BIT\ \ (D4\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00380\ \textcolor{preprocessor}{\ \ \ \ \#define\ D5\_PIN\_BIT\ \ (D5\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00381\ \textcolor{preprocessor}{\ \ \ \ \#define\ D6\_PIN\_BIT\ \ (D6\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00382\ \textcolor{preprocessor}{\ \ \ \ \#define\ D7\_PIN\_BIT\ \ (D7\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \ \ \ \ \textcolor{comment}{//\ Pin\ port\ -\/\ better\ than\ get\_GPIO\_Port()\ which\ seems\ to\ be\ slow...}}
\DoxyCodeLine{00385\ \textcolor{preprocessor}{\ \ \ \ \#define\ D0\_PIN\_PORT\ GPIOA}}
\DoxyCodeLine{00386\ \textcolor{preprocessor}{\ \ \ \ \#define\ D1\_PIN\_PORT\ GPIOC}}
\DoxyCodeLine{00387\ \textcolor{preprocessor}{\ \ \ \ \#define\ D2\_PIN\_PORT\ GPIOA}}
\DoxyCodeLine{00388\ \textcolor{preprocessor}{\ \ \ \ \#define\ D3\_PIN\_PORT\ GPIOB}}
\DoxyCodeLine{00389\ \textcolor{preprocessor}{\ \ \ \ \#define\ D4\_PIN\_PORT\ GPIOB}}
\DoxyCodeLine{00390\ \textcolor{preprocessor}{\ \ \ \ \#define\ D5\_PIN\_PORT\ GPIOB}}
\DoxyCodeLine{00391\ \textcolor{preprocessor}{\ \ \ \ \#define\ D6\_PIN\_PORT\ GPIOB}}
\DoxyCodeLine{00392\ \textcolor{preprocessor}{\ \ \ \ \#define\ D7\_PIN\_PORT\ GPIOA}}
\DoxyCodeLine{00393\ }
\DoxyCodeLine{00394\ \ \ \ \ \textcolor{comment}{//\ Pin\ masks\ for\ set/clear}}
\DoxyCodeLine{00395\ \textcolor{preprocessor}{\ \ \ \ \#define\ D0\_PIN\_MASK\ (1UL<<\ 9)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PA9}}
\DoxyCodeLine{00396\ \textcolor{preprocessor}{\ \ \ \ \#define\ D1\_PIN\_MASK\ (1UL<<\ 7)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PC7}}
\DoxyCodeLine{00397\ \textcolor{preprocessor}{\ \ \ \ \#define\ D2\_PIN\_MASK\ (1UL<<10)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PA10}}
\DoxyCodeLine{00398\ \textcolor{preprocessor}{\ \ \ \ \#define\ D3\_PIN\_MASK\ (1UL<<\ 3)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PB3}}
\DoxyCodeLine{00399\ \textcolor{preprocessor}{\ \ \ \ \#define\ D4\_PIN\_MASK\ (1UL<<\ 5)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PB5}}
\DoxyCodeLine{00400\ \textcolor{preprocessor}{\ \ \ \ \#define\ D5\_PIN\_MASK\ (1UL<<\ 4)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PB4}}
\DoxyCodeLine{00401\ \textcolor{preprocessor}{\ \ \ \ \#define\ D6\_PIN\_MASK\ (1UL<<10)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PB10}}
\DoxyCodeLine{00402\ \textcolor{preprocessor}{\ \ \ \ \#define\ D7\_PIN\_MASK\ (1UL<<\ 8)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PA8}}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \ \ \ \ \textcolor{comment}{//\ Create\ bit\ set/reset\ mask\ based\ on\ LS\ byte\ of\ value\ B}}
\DoxyCodeLine{00405\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ D0\_BSR\_MASK(B)\ ((D0\_PIN\_MASK<<16)>>(((B)<<\ 4)\&0x10))}}
\DoxyCodeLine{00406\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ D1\_BSR\_MASK(B)\ ((D1\_PIN\_MASK<<16)>>(((B)<<\ 3)\&0x10))}}
\DoxyCodeLine{00407\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ D2\_BSR\_MASK(B)\ ((D2\_PIN\_MASK<<16)>>(((B)<<\ 2)\&0x10))}}
\DoxyCodeLine{00408\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ D3\_BSR\_MASK(B)\ ((D3\_PIN\_MASK<<16)>>(((B)<<\ 1)\&0x10))}}
\DoxyCodeLine{00409\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ D4\_BSR\_MASK(B)\ ((D4\_PIN\_MASK<<16)>>(((B)<<\ 0)\&0x10))}}
\DoxyCodeLine{00410\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ D5\_BSR\_MASK(B)\ ((D5\_PIN\_MASK<<16)>>(((B)>>\ 1)\&0x10))}}
\DoxyCodeLine{00411\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ D6\_BSR\_MASK(B)\ ((D6\_PIN\_MASK<<16)>>(((B)>>\ 2)\&0x10))}}
\DoxyCodeLine{00412\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ D7\_BSR\_MASK(B)\ ((D7\_PIN\_MASK<<16)>>(((B)>>\ 3)\&0x10))}}
\DoxyCodeLine{00413\ \ \ \ \ \textcolor{comment}{//\ Create\ bit\ set/reset\ mask\ for\ top\ byte\ of\ 16-\/bit\ value\ B}}
\DoxyCodeLine{00414\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ D8\_BSR\_MASK(B)\ ((D0\_PIN\_MASK<<16)>>(((B)>>\ 4)\&0x10))}}
\DoxyCodeLine{00415\ \textcolor{preprocessor}{\ \ \ \ \#define\ \ D9\_BSR\_MASK(B)\ ((D1\_PIN\_MASK<<16)>>(((B)>>\ 5)\&0x10))}}
\DoxyCodeLine{00416\ \textcolor{preprocessor}{\ \ \ \ \#define\ D10\_BSR\_MASK(B)\ ((D2\_PIN\_MASK<<16)>>(((B)>>\ 6)\&0x10))}}
\DoxyCodeLine{00417\ \textcolor{preprocessor}{\ \ \ \ \#define\ D11\_BSR\_MASK(B)\ ((D3\_PIN\_MASK<<16)>>(((B)>>\ 7)\&0x10))}}
\DoxyCodeLine{00418\ \textcolor{preprocessor}{\ \ \ \ \#define\ D12\_BSR\_MASK(B)\ ((D4\_PIN\_MASK<<16)>>(((B)>>\ 8)\&0x10))}}
\DoxyCodeLine{00419\ \textcolor{preprocessor}{\ \ \ \ \#define\ D13\_BSR\_MASK(B)\ ((D5\_PIN\_MASK<<16)>>(((B)>>\ 9)\&0x10))}}
\DoxyCodeLine{00420\ \textcolor{preprocessor}{\ \ \ \ \#define\ D14\_BSR\_MASK(B)\ ((D6\_PIN\_MASK<<16)>>(((B)>>10)\&0x10))}}
\DoxyCodeLine{00421\ \textcolor{preprocessor}{\ \ \ \ \#define\ D15\_BSR\_MASK(B)\ ((D7\_PIN\_MASK<<16)>>(((B)>>11)\&0x10))}}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \ \ \ \ \textcolor{comment}{//\ Write\ 8\ bits\ to\ TFT}}
\DoxyCodeLine{00424\ \textcolor{preprocessor}{\ \ \ \ \#define\ tft\_Write\_8(C)\ \ \ GPIOA-\/>BSRR\ =\ D0\_BSR\_MASK(C)\ |\ D2\_BSR\_MASK(C)\ |\ D7\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00425\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00426\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOC-\/>BSRR\ =\ D1\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00427\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOB-\/>BSRR\ =\ D3\_BSR\_MASK(C)\ |\ D4\_BSR\_MASK(C)\ |\ D5\_BSR\_MASK(C)\ |\ D6\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00428\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB\ }\textcolor{comment}{//\ Need\ to\ slow\ down\ strobe}}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00430\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined\ (SSD1963\_DRIVER)}}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00432\ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ 18-\/bit\ color\ to\ TFT\ (untested)}}
\DoxyCodeLine{00433\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_16(C)\ \ r6\ =\ (((C)\ \&\ 0xF800)>>\ 8);\ g6\ =\ (((C)\ \&\ 0x07E0)>>\ 3);\ b6\ =\ (((C)\ \&\ 0x001F)<<\ 3);\ \(\backslash\)}}
\DoxyCodeLine{00434\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOA-\/>BSRR\ =\ D0\_BSR\_MASK(r6)\ |\ D2\_BSR\_MASK(r6)\ |\ D7\_BSR\_MASK(r6);\ \(\backslash\)}}
\DoxyCodeLine{00435\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00436\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOC-\/>BSRR\ =\ D1\_BSR\_MASK(r6);\ \(\backslash\)}}
\DoxyCodeLine{00437\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOB-\/>BSRR\ =\ D3\_BSR\_MASK(r6)\ |\ D4\_BSR\_MASK(r6)\ |\ D5\_BSR\_MASK(r6)\ |\ D6\_BSR\_MASK(r6);\ \(\backslash\)}}
\DoxyCodeLine{00438\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\ \(\backslash\)}}
\DoxyCodeLine{00439\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOA-\/>BSRR\ =\ D0\_BSR\_MASK(g6)\ |\ D2\_BSR\_MASK(g6)\ |\ D7\_BSR\_MASK(g6);\ \(\backslash\)}}
\DoxyCodeLine{00440\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00441\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOC-\/>BSRR\ =\ D1\_BSR\_MASK(g6);\ \(\backslash\)}}
\DoxyCodeLine{00442\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOB-\/>BSRR\ =\ D3\_BSR\_MASK(g6)\ |\ D4\_BSR\_MASK(g6)\ |\ D5\_BSR\_MASK(g6)\ |\ D6\_BSR\_MASK(g6);\ \(\backslash\)}}
\DoxyCodeLine{00443\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\ \(\backslash\)}}
\DoxyCodeLine{00444\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOA-\/>BSRR\ =\ D0\_BSR\_MASK(b6)\ |\ D2\_BSR\_MASK(b6)\ |\ D7\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00445\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00446\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOC-\/>BSRR\ =\ D1\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00447\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOB-\/>BSRR\ =\ D3\_BSR\_MASK(b6)\ |\ D4\_BSR\_MASK(b6)\ |\ D5\_BSR\_MASK(b6)\ |\ D6\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00448\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB\ }\textcolor{comment}{//\ Need\ to\ slow\ down\ strobe}}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00450\ \ \ \ \ \ \ \textcolor{comment}{//\ 18-\/bit\ color\ write\ with\ swapped\ bytes}}
\DoxyCodeLine{00451\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_16S(C)\ Cswap\ =\ ((C)\ >>8\ |\ (C)\ <<\ 8);\ tft\_Write\_16(Cswap)}}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ 16\ bits\ to\ TFT}}
\DoxyCodeLine{00455\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_16(C)\ \ GPIOA-\/>BSRR\ =\ D8\_BSR\_MASK(C)\ |\ D10\_BSR\_MASK(C)\ |\ D15\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00456\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00457\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOC-\/>BSRR\ =\ D9\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00458\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOB-\/>BSRR\ =\ D11\_BSR\_MASK(C)\ |\ D12\_BSR\_MASK(C)\ |\ D13\_BSR\_MASK(C)\ |\ D14\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00459\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\ \(\backslash\)}}
\DoxyCodeLine{00460\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOA-\/>BSRR\ =\ D0\_BSR\_MASK(C)\ |\ D2\_BSR\_MASK(C)\ |\ D7\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00461\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00462\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOC-\/>BSRR\ =\ D1\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00463\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOB-\/>BSRR\ =\ D3\_BSR\_MASK(C)\ |\ D4\_BSR\_MASK(C)\ |\ D5\_BSR\_MASK(C)\ |\ D6\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00464\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB\ }\textcolor{comment}{//\ Need\ to\ slow\ down\ strobe}}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \ \ \ \ \ \ \textcolor{comment}{//\ 16-\/bit\ write\ with\ swapped\ bytes}}
\DoxyCodeLine{00467\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_16S(C)\ GPIOA-\/>BSRR\ =\ D0\_BSR\_MASK(C)\ |\ D2\_BSR\_MASK(C)\ |\ D7\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00468\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00469\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOC-\/>BSRR\ =\ D1\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00470\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOB-\/>BSRR\ =\ D3\_BSR\_MASK(C)\ |\ D4\_BSR\_MASK(C)\ |\ D5\_BSR\_MASK(C)\ |\ D6\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00471\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\ \(\backslash\)}}
\DoxyCodeLine{00472\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOA-\/>BSRR\ =\ D8\_BSR\_MASK(C)\ |\ D10\_BSR\_MASK(C)\ |\ D15\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00473\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00474\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOC-\/>BSRR\ =\ D9\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00475\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOB-\/>BSRR\ =\ D11\_BSR\_MASK(C)\ |\ D12\_BSR\_MASK(C)\ |\ D13\_BSR\_MASK(C)\ |\ D14\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00476\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB}}
\DoxyCodeLine{00477\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00479\ \textcolor{preprocessor}{\ \ \ \ \#define\ tft\_Write\_32(C)\ \ \ \ tft\_Write\_16((uint16\_t)((C)>>16));\ tft\_Write\_16((uint16\_t)(C))}}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00481\ \textcolor{preprocessor}{\ \ \ \ \#define\ tft\_Write\_32C(C,D)\ tft\_Write\_16((uint16\_t)(C));\ tft\_Write\_16((uint16\_t)(D))}}
\DoxyCodeLine{00482\ }
\DoxyCodeLine{00483\ \textcolor{preprocessor}{\ \ \ \ \#define\ tft\_Write\_32D(C)\ \ \ tft\_Write\_16((uint16\_t)(C));\ tft\_Write\_16((uint16\_t)(C))}}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00485\ \ \ \ \ \textcolor{comment}{//\ Read\ a\ data\ bit}}
\DoxyCodeLine{00486\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_TFT\_D0\ (((GPIOA-\/>IDR)\&(D0\_PIN\_MASK))>>(\ 9-\/0))\ }\textcolor{comment}{//\ Read\ pin\ PA9}}
\DoxyCodeLine{00487\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_TFT\_D1\ (((GPIOC-\/>IDR)\&(D1\_PIN\_MASK))>>(\ 7-\/1))\ }\textcolor{comment}{//\ Read\ pin\ PC7}}
\DoxyCodeLine{00488\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_TFT\_D2\ (((GPIOA-\/>IDR)\&(D2\_PIN\_MASK))>>(10-\/2))\ }\textcolor{comment}{//\ Read\ pin\ PA10}}
\DoxyCodeLine{00489\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_TFT\_D3\ (((GPIOB-\/>IDR)\&(D3\_PIN\_MASK))>>(\ 3-\/3))\ }\textcolor{comment}{//\ Read\ pin\ PB3}}
\DoxyCodeLine{00490\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_TFT\_D4\ (((GPIOB-\/>IDR)\&(D4\_PIN\_MASK))>>(\ 5-\/4))\ }\textcolor{comment}{//\ Read\ pin\ PB5}}
\DoxyCodeLine{00491\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_TFT\_D5\ (((GPIOB-\/>IDR)\&(D5\_PIN\_MASK))<<(-\/4+5))\ }\textcolor{comment}{//\ Read\ pin\ PB4}}
\DoxyCodeLine{00492\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_TFT\_D6\ (((GPIOB-\/>IDR)\&(D6\_PIN\_MASK))>>(10-\/6))\ }\textcolor{comment}{//\ Read\ pin\ PB10}}
\DoxyCodeLine{00493\ \textcolor{preprocessor}{\ \ \ \ \#define\ RD\_TFT\_D7\ (((GPIOA-\/>IDR)\&(D7\_PIN\_MASK))>>(\ 8-\/7))\ }\textcolor{comment}{//\ Read\ pin\ PA8}}
\DoxyCodeLine{00494\ }
\DoxyCodeLine{00496\ \textcolor{comment}{//\ Nucleo\ 144:\ hard-\/coded\ pins}}
\DoxyCodeLine{00498\ \textcolor{preprocessor}{\ \ \#elif\ defined\ (NUCLEO\_144\_TFT)}}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \ \ \ \ \textcolor{comment}{//\ Convert\ Arduino\ pin\ reference\ Dx\ or\ STM\ pin\ reference\ PXn\ to\ port\ and\ mask}}
\DoxyCodeLine{00501\ \ \ \ \ \textcolor{comment}{//\ (diagnostic\ only\ -\/\ not\ used\ for\ Nucleo)}}
\DoxyCodeLine{00502\ \textcolor{preprocessor}{\ \ \ \ \#define\ D0\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D0)}}
\DoxyCodeLine{00503\ \textcolor{preprocessor}{\ \ \ \ \#define\ D1\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D1)}}
\DoxyCodeLine{00504\ \textcolor{preprocessor}{\ \ \ \ \#define\ D2\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D2)}}
\DoxyCodeLine{00505\ \textcolor{preprocessor}{\ \ \ \ \#define\ D3\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D3)}}
\DoxyCodeLine{00506\ \textcolor{preprocessor}{\ \ \ \ \#define\ D4\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D4)}}
\DoxyCodeLine{00507\ \textcolor{preprocessor}{\ \ \ \ \#define\ D5\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D5)}}
\DoxyCodeLine{00508\ \textcolor{preprocessor}{\ \ \ \ \#define\ D6\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D6)}}
\DoxyCodeLine{00509\ \textcolor{preprocessor}{\ \ \ \ \#define\ D7\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D7)}}
\DoxyCodeLine{00510\ }
\DoxyCodeLine{00511\ \ \ \ \ \textcolor{comment}{//\ Pin\ port\ bit\ number\ 0-\/15\ (diagnostic\ only\ -\/\ not\ used\ for\ Nucleo)}}
\DoxyCodeLine{00512\ \textcolor{preprocessor}{\ \ \ \ \#define\ D0\_PIN\_BIT\ \ (D0\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00513\ \textcolor{preprocessor}{\ \ \ \ \#define\ D1\_PIN\_BIT\ \ (D1\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00514\ \textcolor{preprocessor}{\ \ \ \ \#define\ D2\_PIN\_BIT\ \ (D2\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00515\ \textcolor{preprocessor}{\ \ \ \ \#define\ D3\_PIN\_BIT\ \ (D3\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00516\ \textcolor{preprocessor}{\ \ \ \ \#define\ D4\_PIN\_BIT\ \ (D4\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00517\ \textcolor{preprocessor}{\ \ \ \ \#define\ D5\_PIN\_BIT\ \ (D5\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00518\ \textcolor{preprocessor}{\ \ \ \ \#define\ D6\_PIN\_BIT\ \ (D6\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00519\ \textcolor{preprocessor}{\ \ \ \ \#define\ D7\_PIN\_BIT\ \ (D7\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ }
\DoxyCodeLine{00522\ \textcolor{preprocessor}{\ \ \ \ \#if\ !defined\ (STM32H7xx)}}
\DoxyCodeLine{00523\ }
\DoxyCodeLine{00524\ \ \ \ \ \ \ \textcolor{comment}{//\ Ports\ associated\ with\ pins\ -\/\ get\_GPIO\_Port()\ seems\ to\ be\ slow...}}
\DoxyCodeLine{00525\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D0\_PIN\_PORT\ GPIOF}}
\DoxyCodeLine{00526\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D1\_PIN\_PORT\ GPIOD}}
\DoxyCodeLine{00527\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D2\_PIN\_PORT\ GPIOF}}
\DoxyCodeLine{00528\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D3\_PIN\_PORT\ GPIOE}}
\DoxyCodeLine{00529\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D4\_PIN\_PORT\ GPIOF}}
\DoxyCodeLine{00530\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D5\_PIN\_PORT\ GPIOE}}
\DoxyCodeLine{00531\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D6\_PIN\_PORT\ GPIOE}}
\DoxyCodeLine{00532\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D7\_PIN\_PORT\ GPIOF}}
\DoxyCodeLine{00533\ }
\DoxyCodeLine{00534\ \ \ \ \ \ \ \textcolor{comment}{//\ Pin\ masks\ for\ set/clear}}
\DoxyCodeLine{00535\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D0\_PIN\_MASK\ (1UL<<12)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PF12\ PF3}}
\DoxyCodeLine{00536\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D1\_PIN\_MASK\ (1UL<<15)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PD15}}
\DoxyCodeLine{00537\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D2\_PIN\_MASK\ (1UL<<15)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PF15\ PG14}}
\DoxyCodeLine{00538\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D3\_PIN\_MASK\ (1UL<<13)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PE13}}
\DoxyCodeLine{00539\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D4\_PIN\_MASK\ (1UL<<14)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PF14}}
\DoxyCodeLine{00540\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D5\_PIN\_MASK\ (1UL<<11)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PE11}}
\DoxyCodeLine{00541\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D6\_PIN\_MASK\ (1UL<<\ 9)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PE9}}
\DoxyCodeLine{00542\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D7\_PIN\_MASK\ (1UL<<13)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PF13\ PG12}}
\DoxyCodeLine{00543\ }
\DoxyCodeLine{00544\ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ bit\ set/reset\ mask\ based\ on\ LS\ byte\ of\ value\ B}}
\DoxyCodeLine{00545\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D0\_BSR\_MASK(B)\ ((D0\_PIN\_MASK<<16)>>(((B)<<\ 4)\&0x10))}}
\DoxyCodeLine{00546\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D1\_BSR\_MASK(B)\ ((D1\_PIN\_MASK<<16)>>(((B)<<\ 3)\&0x10))}}
\DoxyCodeLine{00547\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D2\_BSR\_MASK(B)\ ((D2\_PIN\_MASK<<16)>>(((B)<<\ 2)\&0x10))}}
\DoxyCodeLine{00548\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D3\_BSR\_MASK(B)\ ((D3\_PIN\_MASK<<16)>>(((B)<<\ 1)\&0x10))}}
\DoxyCodeLine{00549\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D4\_BSR\_MASK(B)\ ((D4\_PIN\_MASK<<16)>>(((B)<<\ 0)\&0x10))}}
\DoxyCodeLine{00550\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D5\_BSR\_MASK(B)\ ((D5\_PIN\_MASK<<16)>>(((B)>>\ 1)\&0x10))}}
\DoxyCodeLine{00551\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D6\_BSR\_MASK(B)\ ((D6\_PIN\_MASK<<16)>>(((B)>>\ 2)\&0x10))}}
\DoxyCodeLine{00552\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D7\_BSR\_MASK(B)\ ((D7\_PIN\_MASK<<16)>>(((B)>>\ 3)\&0x10))}}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ bit\ set/reset\ mask\ for\ top\ byte\ of\ 16-\/bit\ value\ B}}
\DoxyCodeLine{00554\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D8\_BSR\_MASK(B)\ ((D0\_PIN\_MASK<<16)>>(((B)>>\ 4)\&0x10))}}
\DoxyCodeLine{00555\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D9\_BSR\_MASK(B)\ ((D1\_PIN\_MASK<<16)>>(((B)>>\ 5)\&0x10))}}
\DoxyCodeLine{00556\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D10\_BSR\_MASK(B)\ ((D2\_PIN\_MASK<<16)>>(((B)>>\ 6)\&0x10))}}
\DoxyCodeLine{00557\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D11\_BSR\_MASK(B)\ ((D3\_PIN\_MASK<<16)>>(((B)>>\ 7)\&0x10))}}
\DoxyCodeLine{00558\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D12\_BSR\_MASK(B)\ ((D4\_PIN\_MASK<<16)>>(((B)>>\ 8)\&0x10))}}
\DoxyCodeLine{00559\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D13\_BSR\_MASK(B)\ ((D5\_PIN\_MASK<<16)>>(((B)>>\ 9)\&0x10))}}
\DoxyCodeLine{00560\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D14\_BSR\_MASK(B)\ ((D6\_PIN\_MASK<<16)>>(((B)>>10)\&0x10))}}
\DoxyCodeLine{00561\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D15\_BSR\_MASK(B)\ ((D7\_PIN\_MASK<<16)>>(((B)>>11)\&0x10))}}
\DoxyCodeLine{00562\ }
\DoxyCodeLine{00563\ }
\DoxyCodeLine{00564\ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ 8\ bits\ to\ TFT}}
\DoxyCodeLine{00565\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_8(C)\ \ \ GPIOF-\/>BSRR\ =\ D0\_BSR\_MASK(C)\ |\ D2\_BSR\_MASK(C)\ |\ D4\_BSR\_MASK(C)\ |\ D7\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00566\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00567\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOD-\/>BSRR\ =\ D1\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00568\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOE-\/>BSRR\ =\ D3\_BSR\_MASK(C)\ |\ D5\_BSR\_MASK(C)\ |\ D6\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00569\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB}}
\DoxyCodeLine{00570\ }
\DoxyCodeLine{00571\ \textcolor{preprocessor}{\ \ \ \ \ \ \#if\ defined\ (SSD1963\_DRIVER)}}
\DoxyCodeLine{00572\ }
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ 18-\/bit\ color\ to\ TFT\ (untested)}}
\DoxyCodeLine{00574\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ tft\_Write\_16(C)\ \ r6\ =\ (((C)\ \&\ 0xF800)>>\ 8);\ g6\ =\ (((C)\ \&\ 0x07E0)>>\ 3);\ b6\ =\ (((C)\ \&\ 0x001F)<<\ 3);\ \(\backslash\)}}
\DoxyCodeLine{00575\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOF-\/>BSRR\ =\ D0\_BSR\_MASK(r6)\ |\ D2\_BSR\_MASK(r6)\ |\ D4\_BSR\_MASK(r6)\ |\ D7\_BSR\_MASK(r6);\ \(\backslash\)}}
\DoxyCodeLine{00576\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00577\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOD-\/>BSRR\ =\ D1\_BSR\_MASK(r6);\ \(\backslash\)}}
\DoxyCodeLine{00578\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOE-\/>BSRR\ =\ D3\_BSR\_MASK(r6)\ |\ D5\_BSR\_MASK(r6)\ |\ D6\_BSR\_MASK(r6);\ \(\backslash\)}}
\DoxyCodeLine{00579\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\ \(\backslash\)}}
\DoxyCodeLine{00580\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOF-\/>BSRR\ =\ D0\_BSR\_MASK(g6)\ |\ D2\_BSR\_MASK(g6)\ |\ D4\_BSR\_MASK(g6)\ |\ D7\_BSR\_MASK(g6);\ \(\backslash\)}}
\DoxyCodeLine{00581\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00582\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOD-\/>BSRR\ =\ D1\_BSR\_MASK(g6);\ \(\backslash\)}}
\DoxyCodeLine{00583\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOE-\/>BSRR\ =\ D3\_BSR\_MASK(g6)\ |\ D5\_BSR\_MASK(g6)\ |\ D6\_BSR\_MASK(g6);\ \(\backslash\)}}
\DoxyCodeLine{00584\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\ \(\backslash\)}}
\DoxyCodeLine{00585\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOF-\/>BSRR\ =\ D0\_BSR\_MASK(b6)\ |\ D2\_BSR\_MASK(b6)\ |\ D4\_BSR\_MASK(b6)\ |\ D7\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00586\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00587\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOD-\/>BSRR\ =\ D1\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00588\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOE-\/>BSRR\ =\ D3\_BSR\_MASK(b6)\ |\ D5\_BSR\_MASK(b6)\ |\ D6\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00589\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB\ }\textcolor{comment}{//\ Need\ to\ slow\ down\ strobe}}
\DoxyCodeLine{00590\ }
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 18-\/bit\ color\ write\ with\ swapped\ bytes}}
\DoxyCodeLine{00592\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ tft\_Write\_16S(C)\ Cswap\ =\ ((C)\ >>8\ |\ (C)\ <<\ 8);\ tft\_Write\_16(Cswap)}}
\DoxyCodeLine{00593\ }
\DoxyCodeLine{00594\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{00595\ }
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ 16\ bits\ to\ TFT}}
\DoxyCodeLine{00597\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ tft\_Write\_16(C)\ \ GPIOF-\/>BSRR\ =\ D8\_BSR\_MASK(C)\ |\ D10\_BSR\_MASK(C)\ |\ D12\_BSR\_MASK(C)\ |\ D15\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00598\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00599\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOD-\/>BSRR\ =\ D9\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00600\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOE-\/>BSRR\ =\ D11\_BSR\_MASK(C)\ |\ D13\_BSR\_MASK(C)\ |\ D14\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00601\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\(\backslash\)}}
\DoxyCodeLine{00602\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOF-\/>BSRR\ =\ D0\_BSR\_MASK(C)\ |\ D2\_BSR\_MASK(C)\ |\ D4\_BSR\_MASK(C)\ |\ D7\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00603\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00604\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOD-\/>BSRR\ =\ D1\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00605\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOE-\/>BSRR\ =\ D3\_BSR\_MASK(C)\ |\ D5\_BSR\_MASK(C)\ |\ D6\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00606\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB}}
\DoxyCodeLine{00607\ }
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 16-\/bit\ write\ with\ swapped\ bytes}}
\DoxyCodeLine{00609\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ tft\_Write\_16S(C)\ GPIOF-\/>BSRR\ =\ D0\_BSR\_MASK(C)\ |\ D2\_BSR\_MASK(C)\ |\ D4\_BSR\_MASK(C)\ |\ D7\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00610\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00611\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOD-\/>BSRR\ =\ D1\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00612\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOE-\/>BSRR\ =\ D3\_BSR\_MASK(C)\ |\ D5\_BSR\_MASK(C)\ |\ D6\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00613\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\ \(\backslash\)}}
\DoxyCodeLine{00614\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOF-\/>BSRR\ =\ D8\_BSR\_MASK(C)\ |\ D10\_BSR\_MASK(C)\ |\ D12\_BSR\_MASK(C)\ |\ D15\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00615\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00616\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOD-\/>BSRR\ =\ D9\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00617\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOE-\/>BSRR\ =\ D11\_BSR\_MASK(C)\ |\ D13\_BSR\_MASK(C)\ |\ D14\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00618\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB}}
\DoxyCodeLine{00619\ }
\DoxyCodeLine{00620\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00621\ }
\DoxyCodeLine{00622\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_32(C)\ \ \ \ tft\_Write\_16((uint16\_t)((C)>>16));\ tft\_Write\_16((uint16\_t)(C))}}
\DoxyCodeLine{00623\ }
\DoxyCodeLine{00624\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_32C(C,D)\ tft\_Write\_16((uint16\_t)(C));\ tft\_Write\_16((uint16\_t)(D))}}
\DoxyCodeLine{00625\ }
\DoxyCodeLine{00626\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_32D(C)\ \ \ tft\_Write\_16((uint16\_t)(C));\ tft\_Write\_16((uint16\_t)(C))}}
\DoxyCodeLine{00627\ }
\DoxyCodeLine{00628\ \ \ \ \ \ \ \textcolor{comment}{//\ Read\ a\ data\ bit}}
\DoxyCodeLine{00629\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D0\ (((GPIOF-\/>IDR)\&(D0\_PIN\_MASK))>>(12-\/0))\ }\textcolor{comment}{//\ Read\ pin\ PF12}}
\DoxyCodeLine{00630\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D1\ (((GPIOD-\/>IDR)\&(D1\_PIN\_MASK))>>(15-\/1))\ }\textcolor{comment}{//\ Read\ pin\ PD15}}
\DoxyCodeLine{00631\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D2\ (((GPIOF-\/>IDR)\&(D2\_PIN\_MASK))>>(15-\/2))\ }\textcolor{comment}{//\ Read\ pin\ PF15}}
\DoxyCodeLine{00632\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D3\ (((GPIOE-\/>IDR)\&(D3\_PIN\_MASK))>>(13-\/3))\ }\textcolor{comment}{//\ Read\ pin\ PE13}}
\DoxyCodeLine{00633\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D4\ (((GPIOF-\/>IDR)\&(D4\_PIN\_MASK))>>(14-\/4))\ }\textcolor{comment}{//\ Read\ pin\ PF14}}
\DoxyCodeLine{00634\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D5\ (((GPIOE-\/>IDR)\&(D5\_PIN\_MASK))>>(11-\/5))\ }\textcolor{comment}{//\ Read\ pin\ PE11}}
\DoxyCodeLine{00635\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D6\ (((GPIOE-\/>IDR)\&(D6\_PIN\_MASK))>>(\ 9-\/6))\ }\textcolor{comment}{//\ Read\ pin\ PE9}}
\DoxyCodeLine{00636\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D7\ (((GPIOF-\/>IDR)\&(D7\_PIN\_MASK))>>(13-\/7))\ }\textcolor{comment}{//\ Read\ pin\ PF13}}
\DoxyCodeLine{00637\ }
\DoxyCodeLine{00638\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00639\ }
\DoxyCodeLine{00640\ \ \ \ \ \ \ \textcolor{comment}{//\ Test\ setup\ for\ STM32H743\ -\/\ starts\ to\ run,\ slow\ and\ then\ crashes!\ Board\ support\ bug?}}
\DoxyCodeLine{00641\ }
\DoxyCodeLine{00642\ \ \ \ \ \ \ \textcolor{comment}{//\ Ports\ associated\ with\ pins\ -\/\ get\_GPIO\_Port()\ seems\ to\ be\ slow...}}
\DoxyCodeLine{00643\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D0\_PIN\_PORT\ GPIOF}}
\DoxyCodeLine{00644\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D1\_PIN\_PORT\ GPIOD}}
\DoxyCodeLine{00645\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D2\_PIN\_PORT\ GPIOG}}
\DoxyCodeLine{00646\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D3\_PIN\_PORT\ GPIOE}}
\DoxyCodeLine{00647\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D4\_PIN\_PORT\ GPIOE}}
\DoxyCodeLine{00648\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D5\_PIN\_PORT\ GPIOE}}
\DoxyCodeLine{00649\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D6\_PIN\_PORT\ GPIOE}}
\DoxyCodeLine{00650\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D7\_PIN\_PORT\ GPIOG}}
\DoxyCodeLine{00651\ }
\DoxyCodeLine{00652\ \ \ \ \ \ \ \textcolor{comment}{//\ Pin\ masks\ for\ set/clear}}
\DoxyCodeLine{00653\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D0\_PIN\_MASK\ (1UL<<\ 3)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PF3}}
\DoxyCodeLine{00654\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D1\_PIN\_MASK\ (1UL<<15)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PD15}}
\DoxyCodeLine{00655\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D2\_PIN\_MASK\ (1UL<<14)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PG14}}
\DoxyCodeLine{00656\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D3\_PIN\_MASK\ (1UL<<13)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PE13}}
\DoxyCodeLine{00657\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D4\_PIN\_MASK\ (1UL<<14)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PE14}}
\DoxyCodeLine{00658\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D5\_PIN\_MASK\ (1UL<<11)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PE11}}
\DoxyCodeLine{00659\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D6\_PIN\_MASK\ (1UL<<\ 9)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PE9}}
\DoxyCodeLine{00660\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D7\_PIN\_MASK\ (1UL<<12)\ }\textcolor{comment}{//\ Set/clear\ mask\ for\ PG12}}
\DoxyCodeLine{00661\ }
\DoxyCodeLine{00662\ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ bit\ set/reset\ mask\ based\ on\ LS\ byte\ of\ value\ B}}
\DoxyCodeLine{00663\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D0\_BSR\_MASK(B)\ ((D0\_PIN\_MASK<<16)>>(((B)<<\ 4)\&0x10))}}
\DoxyCodeLine{00664\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D1\_BSR\_MASK(B)\ ((D1\_PIN\_MASK<<16)>>(((B)<<\ 3)\&0x10))}}
\DoxyCodeLine{00665\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D2\_BSR\_MASK(B)\ ((D2\_PIN\_MASK<<16)>>(((B)<<\ 2)\&0x10))}}
\DoxyCodeLine{00666\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D3\_BSR\_MASK(B)\ ((D3\_PIN\_MASK<<16)>>(((B)<<\ 1)\&0x10))}}
\DoxyCodeLine{00667\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D4\_BSR\_MASK(B)\ ((D4\_PIN\_MASK<<16)>>(((B)<<\ 0)\&0x10))}}
\DoxyCodeLine{00668\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D5\_BSR\_MASK(B)\ ((D5\_PIN\_MASK<<16)>>(((B)>>\ 1)\&0x10))}}
\DoxyCodeLine{00669\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D6\_BSR\_MASK(B)\ ((D6\_PIN\_MASK<<16)>>(((B)>>\ 2)\&0x10))}}
\DoxyCodeLine{00670\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D7\_BSR\_MASK(B)\ ((D7\_PIN\_MASK<<16)>>(((B)>>\ 3)\&0x10))}}
\DoxyCodeLine{00671\ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ bit\ set/reset\ mask\ for\ top\ byte\ of\ 16-\/bit\ value\ B}}
\DoxyCodeLine{00672\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D8\_BSR\_MASK(B)\ ((D0\_PIN\_MASK<<16)>>(((B)>>\ 4)\&0x10))}}
\DoxyCodeLine{00673\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D9\_BSR\_MASK(B)\ ((D1\_PIN\_MASK<<16)>>(((B)>>\ 5)\&0x10))}}
\DoxyCodeLine{00674\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D10\_BSR\_MASK(B)\ ((D2\_PIN\_MASK<<16)>>(((B)>>\ 6)\&0x10))}}
\DoxyCodeLine{00675\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D11\_BSR\_MASK(B)\ ((D3\_PIN\_MASK<<16)>>(((B)>>\ 7)\&0x10))}}
\DoxyCodeLine{00676\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D12\_BSR\_MASK(B)\ ((D4\_PIN\_MASK<<16)>>(((B)>>\ 8)\&0x10))}}
\DoxyCodeLine{00677\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D13\_BSR\_MASK(B)\ ((D5\_PIN\_MASK<<16)>>(((B)>>\ 9)\&0x10))}}
\DoxyCodeLine{00678\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D14\_BSR\_MASK(B)\ ((D6\_PIN\_MASK<<16)>>(((B)>>10)\&0x10))}}
\DoxyCodeLine{00679\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D15\_BSR\_MASK(B)\ ((D7\_PIN\_MASK<<16)>>(((B)>>11)\&0x10))}}
\DoxyCodeLine{00680\ }
\DoxyCodeLine{00681\ }
\DoxyCodeLine{00682\ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ 8\ bits\ to\ TFT}}
\DoxyCodeLine{00683\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_8(C)\ \ \ GPIOF-\/>BSRR\ =\ D0\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00684\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOG-\/>BSRR\ =\ D2\_BSR\_MASK(C)\ |\ D7\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00685\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00686\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOD-\/>BSRR\ =\ D1\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00687\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOE-\/>BSRR\ =\ D3\_BSR\_MASK(C)\ |\ D4\_BSR\_MASK(C)\ |\ D5\_BSR\_MASK(C)\ |\ D6\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00688\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB}}
\DoxyCodeLine{00689\ }
\DoxyCodeLine{00690\ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ 16\ bits\ to\ TFT}}
\DoxyCodeLine{00691\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_16(C)\ \ GPIOF-\/>BSRR\ =\ D8\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00692\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOG-\/>BSRR\ =\ D10\_BSR\_MASK(C)\ |\ D15\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00693\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00694\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOD-\/>BSRR\ =\ D9\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00695\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOE-\/>BSRR\ =\ D11\_BSR\_MASK(C)\ |\ D12\_BSR\_MASK(C)\ |\ D13\_BSR\_MASK(C)\ |\ D14\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00696\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\(\backslash\)}}
\DoxyCodeLine{00697\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOF-\/>BSRR\ =\ D0\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00698\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOG-\/>BSRR\ =\ D2\_BSR\_MASK(C)\ |\ D7\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00699\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00700\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOD-\/>BSRR\ =\ D1\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00701\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOE-\/>BSRR\ =\ D3\_BSR\_MASK(C)\ |\ D4\_BSR\_MASK(C)\ |\ D5\_BSR\_MASK(C)\ |\ D6\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00702\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB}}
\DoxyCodeLine{00703\ }
\DoxyCodeLine{00704\ \ \ \ \ \ \ \textcolor{comment}{//\ 16-\/bit\ write\ with\ swapped\ bytes}}
\DoxyCodeLine{00705\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_16S(C)\ GPIOF-\/>BSRR\ =\ D0\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00706\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOG-\/>BSRR\ =\ D2\_BSR\_MASK(C)\ |\ D7\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00707\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00708\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOD-\/>BSRR\ =\ D1\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00709\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOE-\/>BSRR\ =\ D3\_BSR\_MASK(C)\ |\ D4\_BSR\_MASK(C)\ |\ D5\_BSR\_MASK(C)\ |\ D6\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00710\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\ \(\backslash\)}}
\DoxyCodeLine{00711\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOF-\/>BSRR\ =\ D8\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00712\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOG-\/>BSRR\ =\ D10\_BSR\_MASK(C)\ |\ D15\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00713\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00714\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOD-\/>BSRR\ =\ D9\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00715\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOE-\/>BSRR\ =\ D11\_BSR\_MASK(C)\ |\ D12\_BSR\_MASK(C)\ |\ D13\_BSR\_MASK(C)\ |\ D14\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00716\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB}}
\DoxyCodeLine{00717\ }
\DoxyCodeLine{00718\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_32(C)\ \ \ \ tft\_Write\_16((uint16\_t)((C)>>16));\ tft\_Write\_16((uint16\_t)(C))}}
\DoxyCodeLine{00719\ }
\DoxyCodeLine{00720\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_32C(C,D)\ tft\_Write\_16((uint16\_t)(C));\ tft\_Write\_16((uint16\_t)(D))}}
\DoxyCodeLine{00721\ }
\DoxyCodeLine{00722\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_32D(C)\ \ \ tft\_Write\_16((uint16\_t)(C));\ tft\_Write\_16((uint16\_t)(C))}}
\DoxyCodeLine{00723\ }
\DoxyCodeLine{00724\ \ \ \ \ \ \ \textcolor{comment}{//\ Read\ a\ data\ bit}}
\DoxyCodeLine{00725\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D0\ (((GPIOF-\/>IDR)\&(D0\_PIN\_MASK))>>(\ 3-\/0))\ }\textcolor{comment}{//\ Read\ pin\ PF3}}
\DoxyCodeLine{00726\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D1\ (((GPIOD-\/>IDR)\&(D1\_PIN\_MASK))>>(15-\/1))\ }\textcolor{comment}{//\ Read\ pin\ PD15}}
\DoxyCodeLine{00727\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D2\ (((GPIOG-\/>IDR)\&(D2\_PIN\_MASK))>>(14-\/2))\ }\textcolor{comment}{//\ Read\ pin\ PG14}}
\DoxyCodeLine{00728\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D3\ (((GPIOE-\/>IDR)\&(D3\_PIN\_MASK))>>(13-\/3))\ }\textcolor{comment}{//\ Read\ pin\ PE13}}
\DoxyCodeLine{00729\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D4\ (((GPIOE-\/>IDR)\&(D4\_PIN\_MASK))>>(14-\/4))\ }\textcolor{comment}{//\ Read\ pin\ PE14}}
\DoxyCodeLine{00730\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D5\ (((GPIOE-\/>IDR)\&(D5\_PIN\_MASK))>>(11-\/5))\ }\textcolor{comment}{//\ Read\ pin\ PE11}}
\DoxyCodeLine{00731\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D6\ (((GPIOE-\/>IDR)\&(D6\_PIN\_MASK))>>(\ 9-\/6))\ }\textcolor{comment}{//\ Read\ pin\ PE9}}
\DoxyCodeLine{00732\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D7\ (((GPIOG-\/>IDR)\&(D7\_PIN\_MASK))>>(12-\/7))\ }\textcolor{comment}{//\ Read\ pin\ PG12}}
\DoxyCodeLine{00733\ }
\DoxyCodeLine{00734\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00736\ \textcolor{comment}{//\ Support\ for\ other\ STM32\ boards\ (not\ optimised!)}}
\DoxyCodeLine{00738\ \textcolor{preprocessor}{\ \ \#else}}
\DoxyCodeLine{00739\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined\ (STM\_PORTA\_DATA\_BUS)\ ||\ defined\ (STM\_PORTB\_DATA\_BUS)\ ||\ defined\ (STM\_PORTC\_DATA\_BUS)\ ||\ defined\ (STM\_PORTD\_DATA\_BUS)}}
\DoxyCodeLine{00740\ \textcolor{preprocessor}{\ \ \ \ \ \ \#if\ defined\ (STM\_PORTA\_DATA\_BUS)}}
\DoxyCodeLine{00741\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ GPIOX\ GPIOA}}
\DoxyCodeLine{00742\ \textcolor{preprocessor}{\ \ \ \ \ \ \#elif\ defined\ (STM\_PORTB\_DATA\_BUS)}}
\DoxyCodeLine{00743\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ GPIOX\ GPIOB}}
\DoxyCodeLine{00744\ \textcolor{preprocessor}{\ \ \ \ \ \ \#elif\ defined\ (STM\_PORTC\_DATA\_BUS)}}
\DoxyCodeLine{00745\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ GPIOX\ GPIOC}}
\DoxyCodeLine{00746\ \textcolor{preprocessor}{\ \ \ \ \ \ \#elif\ defined\ (STM\_PORTD\_DATA\_BUS)}}
\DoxyCodeLine{00747\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ GPIOX\ GPIOD}}
\DoxyCodeLine{00748\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00749\ }
\DoxyCodeLine{00750\ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ 8\ bits\ to\ TFT}}
\DoxyCodeLine{00751\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_8(C)\ \ \ GPIOX-\/>BSRR\ =\ (0x00FF0000\ |\ (uint8\_t)(C));\ WR\_L;\ WR\_STB}}
\DoxyCodeLine{00752\ }
\DoxyCodeLine{00753\ \textcolor{preprocessor}{\ \ \ \ \ \ \#if\ defined\ (SSD1963\_DRIVER)}}
\DoxyCodeLine{00754\ }
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ 18-\/bit\ color\ to\ TFT\ (untested)}}
\DoxyCodeLine{00756\ }
\DoxyCodeLine{00757\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ tft\_Write\_16(C)\ \ r6\ =\ (((C)\ \&\ 0xF800)>>\ 8);\ g6\ =\ (((C)\ \&\ 0x07E0)>>\ 3);\ b6\ =\ (((C)\ \&\ 0x001F)<<\ 3);\ \(\backslash\)}}
\DoxyCodeLine{00758\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOX-\/>BSRR\ =\ (0x00FF0000\ |\ (uint8\_t)(r6));\ WR\_L;\ WR\_STB;\ \(\backslash\)}}
\DoxyCodeLine{00759\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOX-\/>BSRR\ =\ (0x00FF0000\ |\ (uint8\_t)(g6));\ WR\_L;\ WR\_STB;\ \(\backslash\)}}
\DoxyCodeLine{00760\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOX-\/>BSRR\ =\ (0x00FF0000\ |\ (uint8\_t)(b6));\ WR\_L;\ WR\_STB}}
\DoxyCodeLine{00761\ }
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 18-\/bit\ color\ write\ with\ swapped\ bytes}}
\DoxyCodeLine{00763\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ tft\_Write\_16S(C)\ Cswap\ =\ ((C)\ >>8\ |\ (C)\ <<\ 8);\ tft\_Write\_16(Cswap)}}
\DoxyCodeLine{00764\ }
\DoxyCodeLine{00765\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{00766\ }
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ 16\ bits\ to\ TFT}}
\DoxyCodeLine{00768\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \#define\ tft\_Write\_16(C)\ \ GPIOX-\/>BSRR\ =\ (0x00FF0000\ |\ (uint8\_t)(C>>8));\ WR\_L;\ WR\_STB;\ \(\backslash\)}}
\DoxyCodeLine{00769\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOX-\/>BSRR\ =\ (0x00FF0000\ |\ (uint8\_t)(C>>0));\ WR\_L;\ WR\_STB}}
\DoxyCodeLine{00770\ }
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 16-\/bit\ write\ with\ swapped\ bytes}}
\DoxyCodeLine{00772\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \#define\ tft\_Write\_16S(C)\ GPIOX-\/>BSRR\ =\ (0x00FF0000\ |\ (uint8\_t)(C>>0));\ WR\_L;\ WR\_STB;\ \(\backslash\)}}
\DoxyCodeLine{00773\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GPIOX-\/>BSRR\ =\ (0x00FF0000\ |\ (uint8\_t)(C>>8));\ WR\_L;\ WR\_STB}}
\DoxyCodeLine{00774\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00775\ }
\DoxyCodeLine{00776\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_32(C)\ \ \ \ tft\_Write\_16((uint16\_t)((C)>>16));\ tft\_Write\_16((uint16\_t)(C))}}
\DoxyCodeLine{00777\ }
\DoxyCodeLine{00778\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_32C(C,D)\ tft\_Write\_16((uint16\_t)(C));\ tft\_Write\_16((uint16\_t)(D))}}
\DoxyCodeLine{00779\ }
\DoxyCodeLine{00780\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_32D(C)\ \ \ tft\_Write\_16((uint16\_t)(C));\ tft\_Write\_16((uint16\_t)(C))}}
\DoxyCodeLine{00781\ }
\DoxyCodeLine{00782\ \ \ \ \ \ \ \textcolor{comment}{//\ Read\ a\ data\ bit}}
\DoxyCodeLine{00783\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D0\ ((GPIOX-\/>IDR)\ \&\ 0x01)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D0}}
\DoxyCodeLine{00784\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D1\ ((GPIOX-\/>IDR)\ \&\ 0x02)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D1}}
\DoxyCodeLine{00785\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D2\ ((GPIOX-\/>IDR)\ \&\ 0x04)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D2}}
\DoxyCodeLine{00786\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D3\ ((GPIOX-\/>IDR)\ \&\ 0x08)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D3}}
\DoxyCodeLine{00787\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D4\ ((GPIOX-\/>IDR)\ \&\ 0x10)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D4}}
\DoxyCodeLine{00788\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D5\ ((GPIOX-\/>IDR)\ \&\ 0x20)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D5}}
\DoxyCodeLine{00789\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D6\ ((GPIOX-\/>IDR)\ \&\ 0x40)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D6}}
\DoxyCodeLine{00790\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D7\ ((GPIOX-\/>IDR)\ \&\ 0x80)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D7}}
\DoxyCodeLine{00791\ }
\DoxyCodeLine{00792\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \textcolor{comment}{//\ This\ will\ work\ with\ any\ STM32\ to\ parallel\ TFT\ pin\ mapping\ but\ will\ be\ slower}}
\DoxyCodeLine{00794\ }
\DoxyCodeLine{00795\ \ \ \ \ \ \ \textcolor{comment}{//\ Convert\ Arduino\ pin\ reference\ Dx\ or\ STM\ pin\ reference\ PXn\ to\ port\ and\ mask}}
\DoxyCodeLine{00796\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D0\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D0)}}
\DoxyCodeLine{00797\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D1\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D1)}}
\DoxyCodeLine{00798\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D2\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D2)}}
\DoxyCodeLine{00799\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D3\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D3)}}
\DoxyCodeLine{00800\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D4\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D4)}}
\DoxyCodeLine{00801\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D5\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D5)}}
\DoxyCodeLine{00802\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D6\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D6)}}
\DoxyCodeLine{00803\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D7\_PIN\_NAME\ \ digitalPinToPinName(TFT\_D7)}}
\DoxyCodeLine{00804\ }
\DoxyCodeLine{00805\ \ \ \ \ \ \ \textcolor{comment}{//\ Pin\ port\ bit\ number\ 0-\/15}}
\DoxyCodeLine{00806\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D0\_PIN\_BIT\ \ (D0\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00807\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D1\_PIN\_BIT\ \ (D1\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00808\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D2\_PIN\_BIT\ \ (D2\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00809\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D3\_PIN\_BIT\ \ (D3\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00810\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D4\_PIN\_BIT\ \ (D4\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00811\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D5\_PIN\_BIT\ \ (D5\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00812\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D6\_PIN\_BIT\ \ (D6\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00813\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D7\_PIN\_BIT\ \ (D7\_PIN\_NAME\ \&\ 0xF)}}
\DoxyCodeLine{00814\ }
\DoxyCodeLine{00815\ \ \ \ \ \ \ \textcolor{comment}{//\ Pin\ port}}
\DoxyCodeLine{00816\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D0\_PIN\_PORT\ \ digitalPinToPort(TFT\_D0)}}
\DoxyCodeLine{00817\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D1\_PIN\_PORT\ \ digitalPinToPort(TFT\_D1)}}
\DoxyCodeLine{00818\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D2\_PIN\_PORT\ \ digitalPinToPort(TFT\_D2)}}
\DoxyCodeLine{00819\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D3\_PIN\_PORT\ \ digitalPinToPort(TFT\_D3)}}
\DoxyCodeLine{00820\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D4\_PIN\_PORT\ \ digitalPinToPort(TFT\_D4)}}
\DoxyCodeLine{00821\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D5\_PIN\_PORT\ \ digitalPinToPort(TFT\_D5)}}
\DoxyCodeLine{00822\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D6\_PIN\_PORT\ \ digitalPinToPort(TFT\_D6)}}
\DoxyCodeLine{00823\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D7\_PIN\_PORT\ \ digitalPinToPort(TFT\_D7)}}
\DoxyCodeLine{00824\ }
\DoxyCodeLine{00825\ \ \ \ \ \ \ \textcolor{comment}{//\ Pin\ masks\ for\ set/clear}}
\DoxyCodeLine{00826\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D0\_PIN\_MASK\ \ digitalPinToBitMask(TFT\_D0)}}
\DoxyCodeLine{00827\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D1\_PIN\_MASK\ \ digitalPinToBitMask(TFT\_D1)}}
\DoxyCodeLine{00828\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D2\_PIN\_MASK\ \ digitalPinToBitMask(TFT\_D2)}}
\DoxyCodeLine{00829\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D3\_PIN\_MASK\ \ digitalPinToBitMask(TFT\_D3)}}
\DoxyCodeLine{00830\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D4\_PIN\_MASK\ \ digitalPinToBitMask(TFT\_D4)}}
\DoxyCodeLine{00831\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D5\_PIN\_MASK\ \ digitalPinToBitMask(TFT\_D5)}}
\DoxyCodeLine{00832\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D6\_PIN\_MASK\ \ digitalPinToBitMask(TFT\_D6)}}
\DoxyCodeLine{00833\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D7\_PIN\_MASK\ \ digitalPinToBitMask(TFT\_D7)}}
\DoxyCodeLine{00834\ }
\DoxyCodeLine{00835\ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ bit\ set/reset\ mask\ based\ on\ LS\ byte\ of\ value\ B}}
\DoxyCodeLine{00836\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D0\_BSR\_MASK(B)\ ((D0\_PIN\_MASK<<16)>>(((B)<<\ 4)\&0x10))}}
\DoxyCodeLine{00837\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D1\_BSR\_MASK(B)\ ((D1\_PIN\_MASK<<16)>>(((B)<<\ 3)\&0x10))}}
\DoxyCodeLine{00838\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D2\_BSR\_MASK(B)\ ((D2\_PIN\_MASK<<16)>>(((B)<<\ 2)\&0x10))}}
\DoxyCodeLine{00839\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D3\_BSR\_MASK(B)\ ((D3\_PIN\_MASK<<16)>>(((B)<<\ 1)\&0x10))}}
\DoxyCodeLine{00840\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D4\_BSR\_MASK(B)\ ((D4\_PIN\_MASK<<16)>>(((B)<<\ 0)\&0x10))}}
\DoxyCodeLine{00841\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D5\_BSR\_MASK(B)\ ((D5\_PIN\_MASK<<16)>>(((B)>>\ 1)\&0x10))}}
\DoxyCodeLine{00842\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D6\_BSR\_MASK(B)\ ((D6\_PIN\_MASK<<16)>>(((B)>>\ 2)\&0x10))}}
\DoxyCodeLine{00843\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D7\_BSR\_MASK(B)\ ((D7\_PIN\_MASK<<16)>>(((B)>>\ 3)\&0x10))}}
\DoxyCodeLine{00844\ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ bit\ set/reset\ mask\ for\ top\ byte\ of\ 16-\/bit\ value\ B}}
\DoxyCodeLine{00845\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D8\_BSR\_MASK(B)\ ((D0\_PIN\_MASK<<16)>>(((B)>>\ 4)\&0x10))}}
\DoxyCodeLine{00846\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ \ D9\_BSR\_MASK(B)\ ((D1\_PIN\_MASK<<16)>>(((B)>>\ 5)\&0x10))}}
\DoxyCodeLine{00847\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D10\_BSR\_MASK(B)\ ((D2\_PIN\_MASK<<16)>>(((B)>>\ 6)\&0x10))}}
\DoxyCodeLine{00848\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D11\_BSR\_MASK(B)\ ((D3\_PIN\_MASK<<16)>>(((B)>>\ 7)\&0x10))}}
\DoxyCodeLine{00849\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D12\_BSR\_MASK(B)\ ((D4\_PIN\_MASK<<16)>>(((B)>>\ 8)\&0x10))}}
\DoxyCodeLine{00850\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D13\_BSR\_MASK(B)\ ((D5\_PIN\_MASK<<16)>>(((B)>>\ 9)\&0x10))}}
\DoxyCodeLine{00851\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D14\_BSR\_MASK(B)\ ((D6\_PIN\_MASK<<16)>>(((B)>>10)\&0x10))}}
\DoxyCodeLine{00852\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ D15\_BSR\_MASK(B)\ ((D7\_PIN\_MASK<<16)>>(((B)>>11)\&0x10))}}
\DoxyCodeLine{00853\ }
\DoxyCodeLine{00854\ }
\DoxyCodeLine{00855\ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ 8\ bits\ to\ TFT}}
\DoxyCodeLine{00856\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_8(C)\ \ \ D0\_PIN\_PORT-\/>BSRR\ =\ D0\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00857\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D1\_PIN\_PORT-\/>BSRR\ =\ D1\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00858\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D2\_PIN\_PORT-\/>BSRR\ =\ D2\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00859\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D3\_PIN\_PORT-\/>BSRR\ =\ D3\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00860\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00861\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D4\_PIN\_PORT-\/>BSRR\ =\ D4\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00862\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D5\_PIN\_PORT-\/>BSRR\ =\ D5\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00863\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D6\_PIN\_PORT-\/>BSRR\ =\ D6\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00864\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D7\_PIN\_PORT-\/>BSRR\ =\ D7\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00865\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB}}
\DoxyCodeLine{00866\ }
\DoxyCodeLine{00867\ \textcolor{preprocessor}{\ \ \ \ \ \ \#if\ defined\ (SSD1963\_DRIVER)}}
\DoxyCodeLine{00868\ }
\DoxyCodeLine{00869\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ 18-\/bit\ color\ to\ TFT\ (untested)}}
\DoxyCodeLine{00870\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ tft\_Write\_16(C)\ \ r6\ =\ (((C)\ \&\ 0xF800)>>\ 8);\ g6\ =\ (((C)\ \&\ 0x07E0)>>\ 3);\ b6\ =\ (((C)\ \&\ 0x001F)<<\ 3);\ \(\backslash\)}}
\DoxyCodeLine{00871\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D0\_PIN\_PORT-\/>BSRR\ =\ D8\_BSR\_MASK(r6);\ \ \(\backslash\)}}
\DoxyCodeLine{00872\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D1\_PIN\_PORT-\/>BSRR\ =\ D9\_BSR\_MASK(r6);\ \ \(\backslash\)}}
\DoxyCodeLine{00873\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D2\_PIN\_PORT-\/>BSRR\ =\ D10\_BSR\_MASK(r6);\ \(\backslash\)}}
\DoxyCodeLine{00874\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D3\_PIN\_PORT-\/>BSRR\ =\ D11\_BSR\_MASK(r6);\ \(\backslash\)}}
\DoxyCodeLine{00875\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00876\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D4\_PIN\_PORT-\/>BSRR\ =\ D12\_BSR\_MASK(r6);\ \(\backslash\)}}
\DoxyCodeLine{00877\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D5\_PIN\_PORT-\/>BSRR\ =\ D13\_BSR\_MASK(r6);\ \(\backslash\)}}
\DoxyCodeLine{00878\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D6\_PIN\_PORT-\/>BSRR\ =\ D14\_BSR\_MASK(r6);\ \(\backslash\)}}
\DoxyCodeLine{00879\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D7\_PIN\_PORT-\/>BSRR\ =\ D15\_BSR\_MASK(r6);\ \(\backslash\)}}
\DoxyCodeLine{00880\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\(\backslash\)}}
\DoxyCodeLine{00881\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D0\_PIN\_PORT-\/>BSRR\ =\ D8\_BSR\_MASK(g6);\ \ \(\backslash\)}}
\DoxyCodeLine{00882\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D1\_PIN\_PORT-\/>BSRR\ =\ D9\_BSR\_MASK(g6);\ \ \(\backslash\)}}
\DoxyCodeLine{00883\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D2\_PIN\_PORT-\/>BSRR\ =\ D10\_BSR\_MASK(g6);\ \(\backslash\)}}
\DoxyCodeLine{00884\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D3\_PIN\_PORT-\/>BSRR\ =\ D11\_BSR\_MASK(g6);\ \(\backslash\)}}
\DoxyCodeLine{00885\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00886\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D4\_PIN\_PORT-\/>BSRR\ =\ D12\_BSR\_MASK(g6);\ \(\backslash\)}}
\DoxyCodeLine{00887\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D5\_PIN\_PORT-\/>BSRR\ =\ D13\_BSR\_MASK(g6);\ \(\backslash\)}}
\DoxyCodeLine{00888\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D6\_PIN\_PORT-\/>BSRR\ =\ D14\_BSR\_MASK(g6);\ \(\backslash\)}}
\DoxyCodeLine{00889\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D7\_PIN\_PORT-\/>BSRR\ =\ D15\_BSR\_MASK(g6);\ \(\backslash\)}}
\DoxyCodeLine{00890\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\(\backslash\)}}
\DoxyCodeLine{00891\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D0\_PIN\_PORT-\/>BSRR\ =\ D0\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00892\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D1\_PIN\_PORT-\/>BSRR\ =\ D1\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00893\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D2\_PIN\_PORT-\/>BSRR\ =\ D2\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00894\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D3\_PIN\_PORT-\/>BSRR\ =\ D3\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00895\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00896\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D4\_PIN\_PORT-\/>BSRR\ =\ D4\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00897\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D5\_PIN\_PORT-\/>BSRR\ =\ D5\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00898\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D6\_PIN\_PORT-\/>BSRR\ =\ D6\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00899\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D7\_PIN\_PORT-\/>BSRR\ =\ D7\_BSR\_MASK(b6);\ \(\backslash\)}}
\DoxyCodeLine{00900\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB}}
\DoxyCodeLine{00901\ }
\DoxyCodeLine{00902\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 18-\/bit\ color\ write\ with\ swapped\ bytes}}
\DoxyCodeLine{00903\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ tft\_Write\_16S(C)\ Cswap\ =\ ((C)\ >>8\ |\ (C)\ <<\ 8);\ tft\_Write\_16(Cswap)}}
\DoxyCodeLine{00904\ }
\DoxyCodeLine{00905\ \textcolor{preprocessor}{\ \ \ \ \ \ \#else}}
\DoxyCodeLine{00906\ }
\DoxyCodeLine{00907\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Write\ 16\ bits\ to\ TFT}}
\DoxyCodeLine{00908\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ tft\_Write\_16(C)\ \ D0\_PIN\_PORT-\/>BSRR\ =\ D8\_BSR\_MASK(C);\ \ \(\backslash\)}}
\DoxyCodeLine{00909\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D1\_PIN\_PORT-\/>BSRR\ =\ D9\_BSR\_MASK(C);\ \ \(\backslash\)}}
\DoxyCodeLine{00910\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D2\_PIN\_PORT-\/>BSRR\ =\ D10\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00911\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D3\_PIN\_PORT-\/>BSRR\ =\ D11\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00912\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00913\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D4\_PIN\_PORT-\/>BSRR\ =\ D12\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00914\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D5\_PIN\_PORT-\/>BSRR\ =\ D13\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00915\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D6\_PIN\_PORT-\/>BSRR\ =\ D14\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00916\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D7\_PIN\_PORT-\/>BSRR\ =\ D15\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00917\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\(\backslash\)}}
\DoxyCodeLine{00918\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D0\_PIN\_PORT-\/>BSRR\ =\ D0\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00919\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D1\_PIN\_PORT-\/>BSRR\ =\ D1\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00920\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D2\_PIN\_PORT-\/>BSRR\ =\ D2\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00921\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D3\_PIN\_PORT-\/>BSRR\ =\ D3\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00922\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00923\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D4\_PIN\_PORT-\/>BSRR\ =\ D4\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00924\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D5\_PIN\_PORT-\/>BSRR\ =\ D5\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00925\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D6\_PIN\_PORT-\/>BSRR\ =\ D6\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00926\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D7\_PIN\_PORT-\/>BSRR\ =\ D7\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00927\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB}}
\DoxyCodeLine{00928\ }
\DoxyCodeLine{00929\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 16-\/bit\ write\ with\ swapped\ bytes}}
\DoxyCodeLine{00930\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ tft\_Write\_16S(C)\ D0\_PIN\_PORT-\/>BSRR\ =\ D0\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00931\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D1\_PIN\_PORT-\/>BSRR\ =\ D1\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00932\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D2\_PIN\_PORT-\/>BSRR\ =\ D2\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00933\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D3\_PIN\_PORT-\/>BSRR\ =\ D3\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00934\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00935\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D4\_PIN\_PORT-\/>BSRR\ =\ D4\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00936\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D5\_PIN\_PORT-\/>BSRR\ =\ D5\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00937\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D6\_PIN\_PORT-\/>BSRR\ =\ D6\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00938\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D7\_PIN\_PORT-\/>BSRR\ =\ D7\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00939\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB;\ \(\backslash\)}}
\DoxyCodeLine{00940\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D0\_PIN\_PORT-\/>BSRR\ =\ D8\_BSR\_MASK(C);\ \ \(\backslash\)}}
\DoxyCodeLine{00941\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D1\_PIN\_PORT-\/>BSRR\ =\ D9\_BSR\_MASK(C);\ \ \(\backslash\)}}
\DoxyCodeLine{00942\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D2\_PIN\_PORT-\/>BSRR\ =\ D10\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00943\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D3\_PIN\_PORT-\/>BSRR\ =\ D11\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00944\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_L;\ \(\backslash\)}}
\DoxyCodeLine{00945\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D4\_PIN\_PORT-\/>BSRR\ =\ D12\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00946\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D5\_PIN\_PORT-\/>BSRR\ =\ D13\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00947\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D6\_PIN\_PORT-\/>BSRR\ =\ D14\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00948\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ D7\_PIN\_PORT-\/>BSRR\ =\ D15\_BSR\_MASK(C);\ \(\backslash\)}}
\DoxyCodeLine{00949\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WR\_STB}}
\DoxyCodeLine{00950\ \textcolor{preprocessor}{\ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00951\ }
\DoxyCodeLine{00952\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_32(C)\ \ \ \ tft\_Write\_16((uint16\_t)((C)>>16));\ tft\_Write\_16((uint16\_t)(C))}}
\DoxyCodeLine{00953\ }
\DoxyCodeLine{00954\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_32C(C,D)\ tft\_Write\_16((uint16\_t)(C));\ tft\_Write\_16((uint16\_t)(D))}}
\DoxyCodeLine{00955\ }
\DoxyCodeLine{00956\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ tft\_Write\_32D(C)\ \ \ tft\_Write\_16((uint16\_t)(C));\ tft\_Write\_16((uint16\_t)(C))}}
\DoxyCodeLine{00957\ }
\DoxyCodeLine{00958\ \ \ \ \ \ \ \textcolor{comment}{//\ Read\ a\ data\ bit}}
\DoxyCodeLine{00959\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D0\ ((((D0\_PIN\_PORT-\/>IDR)\ >>\ (D0\_PIN\_BIT))\&1)<<0)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D0}}
\DoxyCodeLine{00960\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D1\ ((((D1\_PIN\_PORT-\/>IDR)\ >>\ (D1\_PIN\_BIT))\&1)<<1)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D1}}
\DoxyCodeLine{00961\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D2\ ((((D2\_PIN\_PORT-\/>IDR)\ >>\ (D2\_PIN\_BIT))\&1)<<2)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D2}}
\DoxyCodeLine{00962\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D3\ ((((D3\_PIN\_PORT-\/>IDR)\ >>\ (D3\_PIN\_BIT))\&1)<<3)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D3}}
\DoxyCodeLine{00963\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D4\ ((((D4\_PIN\_PORT-\/>IDR)\ >>\ (D4\_PIN\_BIT))\&1)<<4)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D4}}
\DoxyCodeLine{00964\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D5\ ((((D5\_PIN\_PORT-\/>IDR)\ >>\ (D5\_PIN\_BIT))\&1)<<5)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D5}}
\DoxyCodeLine{00965\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D6\ ((((D6\_PIN\_PORT-\/>IDR)\ >>\ (D6\_PIN\_BIT))\&1)<<6)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D6}}
\DoxyCodeLine{00966\ \textcolor{preprocessor}{\ \ \ \ \ \ \#define\ RD\_TFT\_D7\ ((((D7\_PIN\_PORT-\/>IDR)\ >>\ (D7\_PIN\_BIT))\&1)<<7)\ }\textcolor{comment}{//\ Read\ pin\ TFT\_D7}}
\DoxyCodeLine{00967\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00968\ \textcolor{preprocessor}{\ \ \#endif}}
\DoxyCodeLine{00970\ \textcolor{comment}{//\ Macros\ to\ write\ commands/pixel\ colour\ data\ to\ a\ SPI\ ILI948x\ TFT}}
\DoxyCodeLine{00972\ \textcolor{preprocessor}{\#elif\ \ defined\ (SPI\_18BIT\_DRIVER)\ }\textcolor{comment}{//\ SPI\ 18-\/bit\ colour}}
\DoxyCodeLine{00973\ }
\DoxyCodeLine{00974\ \textcolor{preprocessor}{\ \ \#define\ SPI\_TXE\_CHECK\ \ while(!\_\_HAL\_SPI\_GET\_FLAG(\&spiHal,\ SPI\_FLAG\_TXE))\{\}}}
\DoxyCodeLine{00975\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//BSY\ check\ must\ allow\ for\ APB\ clock\ delay\ by\ checking\ TXE\ flag\ first}}
\DoxyCodeLine{00976\ \textcolor{preprocessor}{\ \ \#define\ SPI\_BUSY\_CHECK\ SPI\_TXE\_CHECK;\ while(\ \_\_HAL\_SPI\_GET\_FLAG(\&spiHal,\ SPI\_FLAG\_BSY))\{\}}}
\DoxyCodeLine{00977\ \textcolor{preprocessor}{\ \ \#define\ TX\_FIFO\ \ \ \ \ \ \ \ SPI\_TXE\_CHECK;\ *((\_\_IO\ uint8\_t\ *)\&SPIX-\/>DR)}}
\DoxyCodeLine{00978\ }
\DoxyCodeLine{00979\ \ \ \textcolor{comment}{//\#define\ tft\_Write\_8(C)\ \ \ spi.transfer(C)}}
\DoxyCodeLine{00980\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_8(C)\ \ \ TX\_FIFO\ =\ (C);\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{00981\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_16(C)\ \ TX\_FIFO\ =\ ((C)\ \&\ 0xF800)>>8;\ TX\_FIFO\ =\ ((C)\ \&\ 0x07E0)>>3;\ TX\_FIFO\ =\ ((C)\ \&\ 0x001F)<<3;\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{00982\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_16S(C)\ TX\_FIFO\ =\ (C)\ \&\ 0xF8;\ TX\_FIFO\ =\ ((C)\ \&\ 0xE000)>>11\ |\ ((C)\ \&\ 0x07)<<5;\ TX\_FIFO\ =\ ((C)\ \&\ 0x1F00)>>5;\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{00983\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_16N(C)\ TX\_FIFO\ =\ ((C)\ \&\ 0xF800)>>8;\ TX\_FIFO\ =\ ((C)\ \&\ 0x07E0)>>3;\ TX\_FIFO\ =\ ((C)\ \&\ 0x001F)<<3}}
\DoxyCodeLine{00984\ }
\DoxyCodeLine{00985\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_32(C)\ \(\backslash\)}}
\DoxyCodeLine{00986\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (C)>>24;\ TX\_FIFO\ =\ (C)>>16;\ \(\backslash\)}}
\DoxyCodeLine{00987\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (C);\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{00988\ }
\DoxyCodeLine{00989\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_32C(C,D)\ \(\backslash\)}}
\DoxyCodeLine{00990\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (C);\ \(\backslash\)}}
\DoxyCodeLine{00991\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (D)>>8;\ TX\_FIFO\ =\ (D);\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{00992\ }
\DoxyCodeLine{00993\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_32D(C)\ \(\backslash\)}}
\DoxyCodeLine{00994\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (C);\ \(\backslash\)}}
\DoxyCodeLine{00995\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (C);\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{00996\ }
\DoxyCodeLine{00998\ \textcolor{comment}{//\ Macros\ to\ write\ commands/pixel\ colour\ data\ to\ a\ SPI\ Raspberry\ Pi\ TFT}}
\DoxyCodeLine{01000\ \textcolor{preprocessor}{\#elif\ \ defined\ (RPI\_DISPLAY\_TYPE)}}
\DoxyCodeLine{01001\ }
\DoxyCodeLine{01002\ \textcolor{preprocessor}{\ \ \#define\ SPI\_TXE\_CHECK\ \ while(!\_\_HAL\_SPI\_GET\_FLAG(\&spiHal,\ SPI\_FLAG\_TXE))\{\}}}
\DoxyCodeLine{01003\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//BSY\ check\ must\ allow\ for\ APB\ clock\ delay\ by\ checking\ TXE\ flag\ first}}
\DoxyCodeLine{01004\ \textcolor{preprocessor}{\ \ \#define\ SPI\_BUSY\_CHECK\ SPI\_TXE\_CHECK;\ while(\ \_\_HAL\_SPI\_GET\_FLAG(\&spiHal,\ SPI\_FLAG\_BSY))\{\}}}
\DoxyCodeLine{01005\ \textcolor{preprocessor}{\ \ \#define\ TX\_FIFO\ \ \ \ \ \ \ \ SPI\_TXE\_CHECK;\ *((\_\_IO\ uint8\_t\ *)\&SPIX-\/>DR)}}
\DoxyCodeLine{01006\ }
\DoxyCodeLine{01007\ \ \ \textcolor{comment}{//\#define\ tft\_Write\_8(C)\ \ \ spi.transfer(C)}}
\DoxyCodeLine{01008\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_8(C)\ \ \ TX\_FIFO\ =\ (0);\ TX\_FIFO\ =\ (C);\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{01009\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_16(C)\ \ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (C);\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{01010\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_16S(C)\ TX\_FIFO\ =\ (C);\ TX\_FIFO\ =\ (C)>>8;\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{01011\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_16N(C)\ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (C)}}
\DoxyCodeLine{01012\ }
\DoxyCodeLine{01013\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_32(C)\ \(\backslash\)}}
\DoxyCodeLine{01014\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (C)>>24;\ TX\_FIFO\ =\ (C)>>16;\ \(\backslash\)}}
\DoxyCodeLine{01015\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (C);\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{01016\ }
\DoxyCodeLine{01017\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_32C(C,D)\ \(\backslash\)}}
\DoxyCodeLine{01018\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (0);\ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (0);\ TX\_FIFO\ =\ (C);\ \(\backslash\)}}
\DoxyCodeLine{01019\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (0);\ TX\_FIFO\ =\ (D)>>8;\ TX\_FIFO\ =\ (0);\ TX\_FIFO\ =\ (D);\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{01020\ }
\DoxyCodeLine{01021\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_32D(C)\ \(\backslash\)}}
\DoxyCodeLine{01022\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (0);\ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (0);\ TX\_FIFO\ =\ (C);\ \(\backslash\)}}
\DoxyCodeLine{01023\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (0);\ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (0);\ TX\_FIFO\ =\ (C);\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{01024\ }
\DoxyCodeLine{01026\ \textcolor{comment}{//\ Macros\ for\ all\ other\ SPI\ displays}}
\DoxyCodeLine{01028\ }
\DoxyCodeLine{01029\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01030\ }
\DoxyCodeLine{01031\ \ \ \textcolor{comment}{//\#define\ DC\_DELAY\ delayMicroseconds(1)\ //\ Premature\ BSY\ clear\ Hardware\ bug?}}
\DoxyCodeLine{01032\ }
\DoxyCodeLine{01033\ \textcolor{preprocessor}{\ \ \#define\ SPI\_TXE\_CHECK\ \ while(!\_\_HAL\_SPI\_GET\_FLAG(\&spiHal,\ SPI\_FLAG\_TXE))\{\}}}
\DoxyCodeLine{01034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//BSY\ check\ must\ allow\ for\ APB\ clock\ delay\ by\ checking\ TXE\ flag\ first}}
\DoxyCodeLine{01035\ \textcolor{preprocessor}{\ \ \#define\ SPI\_BUSY\_CHECK\ SPI\_TXE\_CHECK;\ while(\ \_\_HAL\_SPI\_GET\_FLAG(\&spiHal,\ SPI\_FLAG\_BSY))\{\}}}
\DoxyCodeLine{01036\ \textcolor{preprocessor}{\ \ \#define\ TX\_FIFO\ \ \ \ \ \ \ \ SPI\_TXE\_CHECK;\ *((\_\_IO\ uint8\_t\ *)\&SPIX-\/>DR)}}
\DoxyCodeLine{01037\ }
\DoxyCodeLine{01038\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_8(C)\ \ \ TX\_FIFO\ =\ (C);\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{01039\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_16(C)\ \ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (C);\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{01040\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_16S(C)\ TX\_FIFO\ =\ (C);\ TX\_FIFO\ =\ (C)>>8;\ SPI\_BUSY\_CHECK}}
\DoxyCodeLine{01041\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_16N(C)\ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (C)}}
\DoxyCodeLine{01042\ }
\DoxyCodeLine{01043\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_32(C)\ \(\backslash\)}}
\DoxyCodeLine{01044\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (C)>>24;\ TX\_FIFO\ =\ (C)>>16;\ \(\backslash\)}}
\DoxyCodeLine{01045\ \textcolor{preprocessor}{\ \ \ \ tft\_Write\_16((uint16\_t)\ ((C)>>0))}}
\DoxyCodeLine{01046\ }
\DoxyCodeLine{01047\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_32C(C,D)\ \(\backslash\)}}
\DoxyCodeLine{01048\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (C);\ \(\backslash\)}}
\DoxyCodeLine{01049\ \textcolor{preprocessor}{\ \ \ \ tft\_Write\_16((uint16\_t)\ (D))}}
\DoxyCodeLine{01050\ }
\DoxyCodeLine{01051\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_32D(C)\ \(\backslash\)}}
\DoxyCodeLine{01052\ \textcolor{preprocessor}{\ \ \ \ TX\_FIFO\ =\ (C)>>8;\ TX\_FIFO\ =\ (C);\ \(\backslash\)}}
\DoxyCodeLine{01053\ \textcolor{preprocessor}{\ \ \ \ tft\_Write\_16((uint16\_t)\ (C))}}
\DoxyCodeLine{01054\ }
\DoxyCodeLine{01055\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01056\ }
\DoxyCodeLine{01057\ \textcolor{preprocessor}{\#ifndef\ DC\_DELAY}}
\DoxyCodeLine{01058\ \ \ \textcolor{comment}{//\#define\ DC\_DELAY\ delayMicroseconds(1)\ //\ Premature\ BSY\ clear\ hardware\ bug?}}
\DoxyCodeLine{01059\ \textcolor{preprocessor}{\ \ \#define\ DC\_DELAY}}
\DoxyCodeLine{01060\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01061\ }
\DoxyCodeLine{01062\ \textcolor{preprocessor}{\#ifndef\ tft\_Write\_16N}}
\DoxyCodeLine{01063\ \textcolor{preprocessor}{\ \ \#define\ tft\_Write\_16N\ tft\_Write\_16}}
\DoxyCodeLine{01064\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01065\ }
\DoxyCodeLine{01067\ \textcolor{comment}{//\ Macros\ to\ read\ from\ display\ using\ SPI\ or\ software\ SPI}}
\DoxyCodeLine{01069\ \textcolor{preprocessor}{\#if\ defined\ (TFT\_SDA\_READ)}}
\DoxyCodeLine{01070\ \ \ \textcolor{comment}{//\ Macros\ to\ support\ a\ bit\ banged\ function\ call\ for\ STM32\ and\ bi-\/directional\ SDA\ pin}}
\DoxyCodeLine{01071\ \textcolor{preprocessor}{\ \ \#define\ TFT\_eSPI\_ENABLE\_8\_BIT\_READ\ }\textcolor{comment}{//\ Enable\ tft\_Read\_8();}}
\DoxyCodeLine{01072\ \textcolor{preprocessor}{\ \ \#define\ SCLK\_L\ digitalWrite(TFT\_SCLK,\ LOW)}}
\DoxyCodeLine{01073\ \textcolor{preprocessor}{\ \ \#define\ SCLK\_H\ digitalWrite(TFT\_SCLK,\ HIGH)}}
\DoxyCodeLine{01074\ \textcolor{preprocessor}{\#elif\ !defined\ (TFT\_PARALLEL\_8\_BIT)}}
\DoxyCodeLine{01075\ \ \ \textcolor{comment}{//\ Use\ a\ SPI\ read\ transfer}}
\DoxyCodeLine{01076\ \textcolor{preprocessor}{\ \ \#define\ tft\_Read\_8()\ spi.transfer(0)}}
\DoxyCodeLine{01077\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01078\ }
\DoxyCodeLine{01079\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ Header\ end}}

\end{DoxyCode}
